(function(t){function e(e){for(var a,o,r=e[0],c=e[1],l=e[2],d=0,p=[];d<r.length;d++)o=r[d],n[o]&&p.push(n[o][0]),n[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,r=1;r<i.length;r++){var c=i[r];0!==n[c]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},n={app:0},s=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"07bb":function(t,e,i){},1:function(t,e){},"10b5":function(t,e,i){"use strict";var a=i("e05d"),n=i.n(a);n.a},"11a4":function(t,e,i){"use strict";var a=i("306d"),n=i.n(a);n.a},"1e94":function(t,e,i){},2:function(t,e){},"28fb":function(t,e,i){"use strict";var a=i("f339"),n=i.n(a);n.a},"29f7":function(t,e,i){"use strict";var a=i("3e45"),n=i.n(a);n.a},"2ab4":function(t,e,i){},"2ea3":function(t,e,i){},3:function(t,e){},"306d":function(t,e,i){},"3d06":function(t,e,i){"use strict";var a=i("5b87"),n=i.n(a);n.a},"3e45":function(t,e,i){},4:function(t,e){},"462c":function(t,e,i){},4678:function(t,e,i){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=s(t);return i(e)}function s(t){var e=a[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}n.keys=function(){return Object.keys(a)},n.resolve=s,t.exports=n,n.id="4678"},4980:function(t,e,i){"use strict";var a=i("7ee1"),n=i.n(a);n.a},"4d8c":function(t,e,i){},5:function(t,e){},"56d7":function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",{attrs:{id:"app",dark:t.isDarkTheme,light:!t.isDarkTheme}},[i("v-drawer"),i("v-toolbar",{attrs:{isLoggedIn:t.isLoggedIn,title:t.title,bleOn:t.bleOn},on:{"ble-on":function(e){t.bleOn=!t.bleOn}}}),t.bleOn?i("v-ble",{on:{"ble-off":function(e){t.bleOn=!1}}}):t._e(),t.loading?i("v-progress-linear",{attrs:{indeterminate:!0}}):t._e(),i("v-content",[i("v-container",{attrs:{fluid:"","fill-height":"","ma-0":"","pa-0":""}},[i("v-layout",{attrs:{"ma-0":"","pa-0":""}},[i("router-view")],1)],1),i("v-snackbar",{attrs:{bottom:t.globalSnackbar.bottom,top:t.globalSnackbar.top,left:t.globalSnackbar.left,right:t.globalSnackbar.right,"multi-line":t.globalSnackbar.multiple,vertical:t.globalSnackbar.vertical,timeout:t.globalSnackbar.timeout,color:t.globalSnackbar.mainColor},model:{value:t.globalSnackbar.active,callback:function(e){t.$set(t.globalSnackbar,"active",e)},expression:"globalSnackbar.active"}},[t._v("\n      "+t._s(t.globalSnackbar.message)+"\n      "),i("v-btn",{attrs:{color:t.globalSnackbar.btnColor,flat:""},on:{click:function(e){t.globalSnackbar.active=!1}}},[t._v("\n      Close\n      ")])],1)],1)],1)},s=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isLoggedIn?i("v-toolbar",[i("v-toolbar-side-icon",{on:{click:function(e){return t.toggleDrawer()}}}),i("v-toolbar-title",{staticClass:"info--text"},[t._v(t._s(t.title))]),i("v-spacer")],1):t._e()},r=[],c=new a["default"],l=c,u=i("a874"),d=i.n(u),p=i("75fc"),v=i("2f62"),f=i("0e44"),h=void 0;a["default"].use(v["a"]);var m=new v["a"].Store({plugins:[Object(f["a"])()],state:{user:null,device:null,userID:null,authToken:null,baseUrl:null,serialPorts:[],serialPort:null,localFW:null},actions:{changeTheme:function(t){t.commit("changeTheme")},changeAdvanced:function(t){t.commit("changeAdvanced")}},mutations:{updateSerialPorts:function(t,e){a["default"].set(t,"serialPorts",Object(p["a"])(e))},setSerialPort:function(t,e){a["default"].set(t,"serialPort",e)},setLocalFirmware:function(t,e){a["default"].set(t,"localFW",e)},changeTheme:function(t){t.user.darkTheme=!t.user.darkTheme},changeAdvanced:function(t){t.user.advanced=!t.user.advanced},addAuthToken:function(t,e){localStorage.setItem("authToken",e),t.authToken=e},deleteAuthToken:function(t){t.authToken=null},setUser:function(t,e){t.user=e},setDevice:function(t,e){t.device=e},setBaseUrl:function(t,e){t.baseUrl=e}},getters:{authToken:function(t){return localStorage.getItem("authToken")},user:function(t){return t.user},isDarkTheme:function(t,e){return!e.user||e.user.darkTheme},isAdvanced:function(t,e){return e.user&&e.user.advanced},device:function(t){return t.device},baseUrl:function(t){return t.baseUrl},userEmail:function(t){return t.userEmail},isLoggedIn:function(t){return null!==t.authToken},getSerialPorts:function(t){return t.serialPorts},getSerialPort:function(t){return h.state.serialPort},localFW:function(t){return t.localFW}}}),g={name:"toolbar",props:["isLoggedIn","bleOn","title"],methods:{logout:function(){m.commit("deleteAuthToken"),localStorage.clear(),$cookies.set("token",null),window.location="/"},notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},toggleDrawer:function(){l.$emit(d.a.toggleDrawer)}}},b=g,_=i("2877"),y=Object(_["a"])(b,o,r,!1,null,null,null),x=y.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-navigation-drawer",{attrs:{temporary:"",absolute:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[i("v-list",{staticClass:"pa-1"},[i("v-list-tile",{attrs:{avatar:"",tag:"div"}},[i("v-icon",[t._v("my_location")]),i("v-list-tile-content",[i("v-list-tile-title",{on:{click:function(e){return t.navigate("/profile")}}},[i("p",{staticClass:"caption",staticStyle:{cursor:"pointer","margin-left":"18px"}},[t._v("\n              "+t._s(t.username)+"\n            ")])])],1),i("v-list-tile-action",[i("v-btn",{attrs:{icon:""},on:{click:function(e){return e.stopPropagation(),t.toggle(e)}}},[i("v-icon",[t._v("chevron_left")])],1)],1)],1)],1),i("v-list",{staticClass:"pt-0",attrs:{dense:""}},[i("v-divider",{attrs:{light:""}}),t._l(t.items,function(e){return i("v-list-tile",{key:e.title,on:{click:function(i){return t.navigate(e.route)}}},[i("v-list-tile-action",[i("v-icon",{class:e.classz},[t._v(t._s(e.icon))])],1),i("v-list-tile-content",[i("v-list-tile-title",{attrs:{color:e.classz}},[t._v(t._s(e.title)+" ")])],1)],1)})],2)],1)},k=[],C=(i("7f7f"),i("8c4f")),j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{staticStyle:{margin:"0"}},[i("v-flex",{attrs:{"fill-height":""}},[i("v-img",{attrs:{height:t.imgheight,width:"100%",position:"top",src:"/static/map.png"}}),t.message?i("v-card",{staticClass:"message-card"},[i("v-card-text",{staticStyle:{"min-height":"380px"}},[i("p",{staticClass:"display-2 accent--text"},[t._v("\n      "+t._s(t.message))])])],1):t._e()],1),i("v-dialog-login",{attrs:{dialog:t.loginModal}}),i("span",{staticClass:"download-span"},[i("v-btn",{staticClass:"warning",attrs:{large:"",href:"https://youspot.me",target:"_blank",rel:"noopener noreferrer"}},[t._v("\n    https://youspot.me\n  ")])],1)],1)},$=[],E=i("04e1"),A=i.n(E),D=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{staticClass:"mt-0",attrs:{"max-width":"500px",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{staticClass:"grey lighten-1 pb-3",staticStyle:{opacity:"0.5"},attrs:{light:""}},[i("v-card-title",{attrs:{"full-width":""}},[i("span",{staticClass:"title black--text"},[t._v("#youspot.me @Bouncer:")]),i("v-spacer"),i("i",[t._v(t._s(t.now))])],1),i("v-card-text",[i("v-btn",{staticClass:"black--text info",attrs:{light:"",large:"",block:"",href:t.baseUrl+"/oauth2/authorize/google?redirect_uri=http://localhost:8080/oauth2/redirect"}},[t._v("\n        Login with Google\n      ")]),i("v-btn",{staticClass:"black--text info",attrs:{light:"",large:"",block:"",href:t.baseUrl+"/oauth2/authorize/github?redirect_uri=http://localhost:8080/oauth2/redirect"}},[t._v("\n        Login with Github\n      ")]),i("p")],1)],1)],1)},P=[],S={name:"DialogLogin",props:["dialog"],data:function(){return{baseUrl:m.getters.baseUrl,now:(new Date).toLocaleString()}}},T=S,O=Object(_["a"])(T,D,P,!1,null,null,null),I=O.exports,U={name:"Welcome",data:function(){return{imgheight:window.height-120,message:null,charIdx:0,welcome:"Welcome agent, this is ℿblueweb from µℼ=f(x), please login",openLogin:!1,login:null,password:null,baseUrl:m.getters.baseUrl,ruleReq:[function(t){return!!t||"Field is required"}],emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}]}},components:{"v-dialog-login":I},mounted:function(){var t=this;l.$emit("set-title","youspot.me"),window.scrollTo(0,document.body.scrollHeight);var e=this;setTimeout(function(){e.scrollToTop(1500)},1e3);var i=$cookies.get("token");if(console.log("token",i),null!==i&&"null"!==i){m.commit("addAuthToken",i),A()(i);try{A()(i)}catch(n){return console.log(n),void this.cleanLogin()}this.setUpHttpHeader(i);var a=m.getters.baseUrl+"/api/v2/userinfo";this.$http.get(a).then(function(e){m.commit("setUser",e.data.user),window.scrollTo(0,document.body.scrollHeight),t.welcomeHim(e.body.user),t.openLogin=!1},function(e){t.notifyError(e.status,e.body.message),t.cleanLogin()})}else this.cleanLogin()},computed:{isLoggedIn:function(){return null!==m.getters.user},loginModal:function(){return!this.message&&this.openLogin},isDark:function(){var t=!1;return m.getters.user?m.getters.user.darkTheme:t}},methods:{scrollToTop:function(t){var e=window.scrollY/2,i=0,a=performance.now();function n(s){i+=Math.PI/(t/(s-a)),i>=Math.PI&&window.scrollTo(0,0),0!==window.scrollY&&(window.scrollTo(0,Math.round(e+e*Math.cos(i))),a=s,window.requestAnimationFrame(n))}window.requestAnimationFrame(n)},welcomeHim:function(t){m.commit("setUser",t),l.$emit(d.a.loadingEnd),this.openLogin=!1,this.welcome="Nice to meet you ".concat(t.fullName,", youspot.me is ready to use."),this.writeMessage()},cleanLogin:function(){this.openLogin=!0,console.log("clean login!"),m.commit("setUser",null),m.commit("deleteAuthToken"),this.openLogin=!0,this.welcome="Hello Navigator! Nice to have you around, please login.",this.writeMessage()},notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},setUpHttpHeader:function(t){a["default"].http.interceptors.push(function(e,i){e.headers.set("Authorization","Bearer "+t),e.headers.set("Accept","application/json"),i()})},writeMessage:function(){var t=this;this.charIdx++,this.charIdx>this.welcome.length?this.onMessageEnd():(this.message=this.welcome.substring(0,this.charIdx),setTimeout(function(){t.writeMessage()},13+Math.floor(100*Math.random())+1))},onMessageEnd:function(){this.isLoggedIn?l.$emit(d.a.toggleDrawer):this.openLogin=!0;var t=this;setTimeout(function(){t.message=null},1200)}}},L=U,R=(i("c21d"),Object(_["a"])(L,j,$,!1,null,null,null)),q=R.exports,M=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{row:"",fluid:"","fill-height":""}},[i("v-layout",{staticClass:"fill-height",attrs:{row:"",fluid:""}},[i("v-flex",[i("v-card",{staticClass:"upy-card"},[i("v-card-title",[t._v("\n           User account settings\n        ")]),i("v-card-text",{staticClass:"grow"},[i("v-subheader",[i("span",{staticClass:"grey--text"},[t._v("\n              "+t._s(this.userDetails.username)+"\n            ")])]),i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-layout",{attrs:{row:"",wrap:"","pa-4":""}},[i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{hint:"full name",label:"Full Name"},model:{value:t.fullName,callback:function(e){t.fullName=e},expression:"fullName"}})],1)],1),i("v-layout",{attrs:{row:"",wrap:"","pa-4":""}},[i("v-flex",{attrs:{xs6:""}},[i("v-switch",{attrs:{label:(t.isDarkTheme?"dark":"light")+" theme"},on:{change:t.switchTheme},model:{value:t.isDarkTheme,callback:function(e){t.isDarkTheme=e},expression:"isDarkTheme"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-switch",{attrs:{label:"advanced mode"},on:{change:t.switchAdvanced},model:{value:t.isAdvanced,callback:function(e){t.isAdvanced=e},expression:"isAdvanced"}})],1)],1)],1)],1)],1),t.$store.getters.user.advanced?i("v-expansion-panel",{staticClass:"mt-4"},[i("v-expansion-panel-content",{scopedSlots:t._u([{key:"header",fn:function(){return[i("div",[t._v("API Key")])]},proxy:!0}],null,!1,1101448801)},[i("v-card",[i("v-card-text",[i("v-data-table",{staticClass:"elevation-1",attrs:{"no-data-text":"Please click + to create an API key.",items:t.apiKeys,"hide-actions":"","hide-headers":""},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",[t._v(t._s(e.item.description))]),i("td",[t._v(t._s(e.item.api_key))]),i("td",[t._v(t._s(t._f("formatDate")(e.item.created_at)))]),e.item.last_used?i("td",[t._v(t._s(t._f("formatDate")(e.item.last_used)))]):t._e(),e.item.last_used?t._e():i("td",[t._v("Not Used")]),i("td",{staticClass:"text-xs-right"},[i("v-icon",{on:{click:function(i){return t.copy(e.item.api_key,i)}}},[t._v("file_copy")]),e.item.isDisabled?t._e():i("v-icon",{on:{click:function(i){return t.disableApiKEy(e.item)}}},[t._v("block")]),e.item.isDisabled?i("v-icon",{on:{click:function(i){return t.enableApiKEy(e.item)}}},[t._v("remove_circle")]):t._e(),e.item.isDisabled?i("v-icon",{on:{click:function(i){return t.deleteApiKEy(e.item)}}},[t._v("clear")]):t._e()],1)]}}],null,!1,405486045)})],1),i("v-card-actions",[i("v-btn",{staticClass:"primary",on:{click:function(e){return t.openDialog("APIKey")}}},[i("v-icon",[t._v("add")])],1)],1)],1)],1)],1):t._e()],1),i("v-btn",{attrs:{fixed:"",right:"",bottom:"",fab:"",color:"info"},nativeOn:{click:function(e){return t.saveProfile()}}},[i("v-icon",[t._v("done")])],1)],1),i("v-confirm",{ref:"confirm"}),i("v-dialog-name",{ref:"dialogName"}),i("v-api-key",{attrs:{dialogSignal:t.apiKeyAdd},on:{update:function(e){return t.getAPIKeys()}}})],1)},W=[],z=(i("ac6a"),i("96cf"),i("3b8d")),N=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":t.options.width},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel(e)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{staticClass:"upy-card"},[i("v-toolbar",{attrs:{color:t.options.color,dense:"",flat:""}},[i("v-toolbar-title",{staticClass:"primary--text"},[t._v(t._s(t.title))])],1),i("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!t.message,expression:"!!message"}]},[t._v(t._s(t.message))]),i("v-card-actions",{staticClass:"pt-0"},[i("v-btn",{attrs:{color:"warning primary--text"},nativeOn:{click:function(e){return t.agree(e)}}},[t._v("Yes")]),i("v-btn",{attrs:{color:"info primary--text"},nativeOn:{click:function(e){return t.cancel(e)}}},[t._v("Cancel")])],1)],1)],1)},B=[],F={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,options:{color:"primary",width:450}}},methods:{open:function(t,e,i){var a=this;return this.dialog=!0,this.title=t,this.message=e,this.options=Object.assign(this.options,i),new Promise(function(t,e){a.resolve=t,a.reject=e})},agree:function(){this.resolve(!0),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}},V=F,K=Object(_["a"])(V,N,B,!1,null,null,null),H=K.exports,Y=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":t.options.width},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel(e)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{staticClass:"upy-card"},[i("v-toolbar",{attrs:{color:t.options.color,dense:"",flat:""}},[i("v-toolbar-title",{staticClass:"primary--text"},[t._v(t._s(t.title))])],1),i("v-card-text",{directives:[{name:"show",rawName:"v-show",value:!!t.message,expression:"!!message"}]},[t._v("\n      "+t._s(t.message)+"\n      "),t.dialog?i("v-text-field",{staticClass:"mr-4 ml-2",attrs:{"prepend-icon":"edit",autofocus:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}):t._e()],1),i("v-card-actions",{staticClass:"pt-0"},[i("v-spacer"),i("v-btn",{nativeOn:{click:function(e){return t.cancel(e)}}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"info primary--text"},nativeOn:{click:function(e){return t.save(e)}}},[t._v("Save")])],1)],1)],1)},G=[],J={data:function(){return{dialog:!1,resolve:null,reject:null,message:null,title:null,name:"",options:{color:"primary",width:290}}},methods:{open:function(t,e,i){var a=this;return this.dialog=!0,this.title=t,this.message=e,this.name="",this.options=Object.assign(this.options,i),new Promise(function(t,e){a.resolve=t,a.reject=e})},save:function(){this.resolve(this.name),this.dialog=!1},cancel:function(){this.dialog=!1}}},Q=J,Z=Object(_["a"])(Q,Y,G,!1,null,null,null),X=Z.exports,tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"640"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{staticClass:"upy-card"},[i("v-card-title",[t._v("\n      Add API KEy\n    ")]),i("v-card-text",[i("v-form",{ref:"form"},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{hint:"Descriptions",label:"Descriptions"},model:{value:t.api_descriptions,callback:function(e){t.api_descriptions=e},expression:"api_descriptions"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"secondary",attrs:{flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n          Close\n        ")]),i("v-btn",{staticClass:"primary",attrs:{flat:""},on:{click:function(e){return t.addAPIKey()}}},[t._v("\n          Save\n        ")])],1)],1),i("v-confirm",{ref:"confirm"})],1)},et=[],it={name:"APIKey",props:["dialogSignal"],data:function(){return{dialog:!1,api_descriptions:null}},components:{"v-confirm":H},watch:{dialogSignal:function(t){this.dialog=!this.dialog}},mounted:function(){},methods:{addAPIKey:function(){var t=this,e=m.getters.baseUrl+"/api/v2/api-keys",i={description:this.api_descriptions};this.$http.put(e,i).then(function(t){this.$emit("update"),this.dialog=!1},function(e){console.log(e),console.log("error here"),t.notifyError(e.status,e.body.message)})},navigate:function(t,e){this.$router.push({name:t,params:{id:e}})},notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},at=it,nt=Object(_["a"])(at,tt,et,!1,null,null,null),st=nt.exports,ot={data:function(){return{valid:!1,fullName:null,userDetails:{},copied:!1,apiKeyAdd:!1,apiKeys:[],dialog:!1}},computed:{isDarkTheme:{get:function(){return m.getters.isDarkTheme}},isAdvanced:{get:function(){return m.getters.isAdvanced},set:function(){}}},components:{"v-confirm":H,"v-dialog-name":X,"v-api-key":st},created:function(){this.getAPIKeys()},mounted:function(){l.$emit("set-title","User Profile"),this.userDetails=m.getters.user,this.fullName=m.getters.user.fullName},methods:{switchTheme:function(){m.dispatch("changeTheme")},switchAdvanced:function(){m.dispatch("changeAdvanced")},getComponent:function(t){var e=null,i=this.$parent;while(i&&!e)i.$options.name===t&&(e=i),i=i.$parent;return e},getAPIKeys:function(){var t=this,e=m.getters.baseUrl+"/api/v2/api-keys";this.$http.get(e).then(function(t){this.apiKeys=t.body.apiKeys},function(e){console.log(e),console.log("error here"),t.notifyError(e.status,e.body.message)})},saveProfile:function(){var t=this,e=m.getters.baseUrl+"/api/v2/profile/userinfo",i={fullName:this.fullName,darkTheme:this.isDarkTheme};this.$http.post(e,i).then(function(t){this.navigate({name:"Devices"})},function(e){console.log(e),console.log("error here"),t.notifyError(e.status,e.body.message)})},copy:function(t,e){var i=document.createElement("textarea");i.value=t,i.setAttribute("readonly",""),i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i);var a=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);i.select(),document.execCommand("copy"),document.body.removeChild(i),a&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(a));var n=e,s=e.target.innerText;e.target.innerText="done",e.target.classList.add("primary"),setTimeout(function(){n.target.innerText=s,n.target.classList.remove("primary")},1e3)},disableApiKEy:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a,n,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Disable API KEy","Are you sure you want to disable API KEY?",{color:"info"});case 2:i=t.sent,i&&(a=m.getters.baseUrl+"/api/v2/api-keys/"+e._id,n={isDisabled:!0},this.$http.post(a,n).then(function(t){e.isDisabled=!0},function(t){console.log(t),console.log("error here"),s.notifyError(t.status,t.body.message)}));case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),deleteApiKEy:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete API KEy","Are you sure you want to delete API KEY?",{color:"warning"});case 2:i=t.sent,i&&(a=m.getters.baseUrl+"/api/v2/api-keys/"+e._id,this.$http.delete(a).then(function(t){var i=null;this.apiKeys.forEach(function(t,a){t._id===e._id&&(i=a)}),null!=i&&this.apiKeys.splice(i,1)},function(t){console.log(t),console.log("error here"),n.notifyError(t.status,t.body.message)}));case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),enableApiKEy:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a,n,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Enable API KEy","Are you sure you want to enable API KEY?",{color:"info"});case 2:i=t.sent,i&&(a=m.getters.baseUrl+"/api/v2/api-keys/"+e._id,n={isDisabled:!1},this.$http.post(a,n).then(function(t){e.isDisabled=!1},function(t){console.log(t),console.log("error here"),s.notifyError(t.status,t.body.message)}));case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},navigate:function(t){qo.push(t)},openDialog:function(t){"APIKey"===t&&(this.apiKeyAdd=!this.apiKeyAdd)}}},rt=ot,ct=Object(_["a"])(rt,M,W,!1,null,null,null),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{staticClass:"mb-0 pb-0",attrs:{row:"",wrap:"","fill-height":""}},[t.showMore?i("v-flex",{staticClass:"ma-0 pa-0",attrs:{xs12:""}},[i("v-card",{staticClass:"elevation-1 ma-0 pa-0"},[i("v-layout",{attrs:{row:"",wrap:"","pl-4":"","pr-4":"","text-xs-right":""}},[i("v-flex",{attrs:{xs12:"",md4:""}},[i("v-select",{staticClass:"mr-4",attrs:{label:"All projects",items:t.projects,"item-text":"name","item-value":"_id",clearable:""},model:{value:t.selectedProject,callback:function(e){t.selectedProject=e},expression:"selectedProject"}})],1),i("v-flex",{attrs:{xs12:"",md4:""}},[i("v-text-field",{staticClass:"mr-4",attrs:{"append-icon":"search"},model:{value:t.deviceSearch,callback:function(e){t.deviceSearch=e},expression:"deviceSearch"}})],1),i("v-flex",{attrs:{xs12:"",md4:"","pt-3":"","pr-4":""}},[i("v-btn-toggle",{model:{value:t.toggle_mode,callback:function(e){t.toggle_mode=e},expression:"toggle_mode"}},[i("v-btn",{staticClass:"info",attrs:{flat:"",value:"map"},on:{click:function(e){return t.selectMapView()}}},[i("v-icon",[t._v("map")])],1),i("v-btn",{staticClass:"info",attrs:{flat:"",value:"list"},on:{click:function(e){return t.selectDataTableView()}}},[i("v-icon",[t._v("view_list")])],1),i("v-btn",{staticClass:"info",attrs:{flat:"",value:"dashboard"},on:{click:function(e){return t.selectCardView()}}},[i("v-icon",[t._v("view_module")])],1)],1)],1)],1)],1)],1):t._e(),t.mapView?i("v-layout",[i("v-navigation-drawer",{attrs:{permanent:"",fixed:"",right:"",app:""},model:{value:t.drawerRight,callback:function(e){t.drawerRight=e},expression:"drawerRight"}},[i("v-list",{attrs:{avatar:"","three-line":""}},[t._l(t.devices,function(e){return[i("v-list-tile",{key:e.title,attrs:{avatar:""},on:{click:function(i){return t.navigate("DevicePath",e._id)}}},[i("v-list-tile-action",[i("v-icon",{attrs:{color:"indigo"}},[t._v("nfc")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n              "+t._s(e.name)+"\n          ")]),i("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.unique_id)}})],1),i("v-list-tile-action",[i("v-btn",{attrs:{icon:"",ripple:""}},[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("info")])],1)],1)],1)]})],2)],1),i("v-flex",[i("v-card",{staticClass:" ma-3"},[i("l-map",{ref:"mapref",staticStyle:{height:"505px",width:"calc(100% + 60px)"},attrs:{zoom:t.zoom}},[i("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),t._l(t.filteredDevicesList,function(e,a){return e.location?i("l-marker",{key:a,attrs:{"lat-lng":e.location.marker},on:{click:function(i){return t.navigate("DevicePath",e._id)}}},[i("l-tooltip",[t._v(t._s(e.name))])],1):t._e()})],2)],1)],1)],1):t._e(),t.dataTableView?i("v-layout",{attrs:{"pa-4":"","fill-height":""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",[i("v-data-table",{staticClass:"elevation-1",attrs:{items:t.filteredDevicesList,"hide-actions":"","hide-headers":""},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",[t._v(t._s(e.item.name))]),e.item.location?i("td",[t._v(t._s(e.item.location.country))]):t._e(),e.item.location?t._e():i("td",[t._v("Location Not Selected")]),i("td",{staticClass:"text-xs-right"},[i("v-btn",{staticClass:"ma-0 mt-1",attrs:{small:"",fab:""},on:{click:function(i){return i.stopPropagation(),t.navigate("DeviceSettings",e.item._id)}}},[i("v-icon",{attrs:{color:"dark--text"}},[t._v("settings")])],1),i("v-btn",{staticClass:"info",attrs:{fab:"",small:""},on:{click:function(i){return i.stopPropagation(),t.navigate("DeviceData",e.item._id)}}},[i("v-icon",[t._v("show_chart")])],1)],1)]}}],null,!1,3287208962)})],1)],1)],1):t._e(),t.cardView?i("v-layout",{attrs:{"pa-1":"","fill-height":""}},t._l(t.filteredDevicesList,function(e,a){return i("v-flex",{key:a,attrs:{"mb-1":"",md4:"",sm6:"",xs12:"","pa-1":""}},[i("v-card",{key:a,staticClass:"upy-card pa-2 elevation-4",attrs:{height:"300"}},[i("v-card-title",{staticClass:"pb-0 mb-0"},[i("v-device-title",{attrs:{device:e}})],1),i("v-card-text",{staticClass:"pt-0 mt-0"},[i("v-layout",{staticClass:"fab-container",attrs:{row:""}},[i("v-btn",{staticClass:"device",attrs:{fab:"",small:""},on:{click:function(i){return i.stopPropagation(),t.navigate("DeviceSettings",e._id)}}},[i("v-icon",[t._v("settings")])],1),i("v-btn",{staticClass:"info",attrs:{fab:"",small:""},on:{click:function(i){return i.stopPropagation(),t.navigate("DeviceData",e._id)}}},[i("v-icon",[t._v("show_chart")])],1)],1)],1)],1)],1)}),1):t._e(),i("span",{staticStyle:{"margin-top":"-54px"}},[t.showMore?i("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){e.stopPropagation(),t.showMore=!t.showMore}}},[i("v-icon",[t._v("close")])],1):t._e(),t.showMore?t._e():i("v-btn",{attrs:{small:"",icon:""},on:{click:function(e){e.stopPropagation(),t.showMore=!t.showMore}}},[i("v-icon",[t._v("more_vert")])],1)],1)],1)},dt=[],pt=(i("6762"),i("2fdb"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("p",{staticClass:"primary--text device display-1 pb-0 mb-0"},[t._v("\n"+t._s(t.device.name)),i("br"),i("span",{staticClass:"caption secondary--text"},[t._v("\n  "+t._s(t.device.uname)+"\n  "+t._s(t.device.unique_id)+"\n")])])}),vt=[],ft={name:"DeviceTitle",props:["device"],methods:{navigate:function(t,e){this.$router.push({name:t,params:{id:e}})}}},ht=ft,mt=Object(_["a"])(ht,pt,vt,!1,null,null,null),gt=mt.exports,bt=i("e11e"),_t=i.n(bt),yt=i("2699"),xt=i("a40a"),wt=i("4e2b"),kt=i("31dc"),Ct={name:"Devices",props:["config"],components:{"v-device-title":gt,LMap:yt["a"],LTileLayer:xt["a"],LMarker:wt["a"],LTooltip:kt["a"]},data:function(){return{drawerRight:!1,showMore:!0,toggle_mode:"map",user:m.getters.user,devices:[],projects:[],size:"sm",query_search:null,deviceSearch:"",mapView:!0,dataTableView:!1,cardView:!1,zoom:1,url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',selectedProject:null}},created:function(){this.loadDevices(),this.loadProjects()},mounted:function(){console.log("mounted ..."),l.$emit("set-title","devices list")},computed:{filteredDevicesList:function(){var t=this;return this.devices.filter(function(e){var i=!0;if(t.selectedProject&&(i=e.project&&e.project._id===t.selectedProject),t.deviceSearch){var a=e.name.toLowerCase().includes(t.deviceSearch.toLowerCase());i=t.selectedProject?e.project&&e.project._id===t.selectedProject&&a:a}return i})}},methods:{selectDataTableView:function(){this.dataTableView=!0,this.cardView=!1,this.mapView=!1},selectCardView:function(){this.dataTableView=!1,this.mapView=!1,this.cardView=!0},selectMapView:function(){this.dataTableView=!1,this.cardView=!1,this.mapView=!0;var t=this;this.$nextTick(function(){var e=[];t.devices.forEach(function(t){t.location&&e.push(t.location.marker)});var i=_t.a.polyline(e);t.$refs.mapref.fitBounds(i.getBounds())})},navigate:function(t,e){this.$router.push({name:t,params:{id:e}})},addDevice:function(){var t=this,e=this.devices.length+1,i=m.getters.baseUrl+"/api/v2/account/devices",a={name:"device "+e};this.$http.put(i,a).then(function(t){200===t.data.status&&t.data.device._id&&this.$router.push({name:"DeviceSettings",params:{id:t.data.device._id}})},function(e){console.log(e),t.notifyError(e.status,e.body.message)})},loadDevices:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/devices";this.$http.get(e).then(function(t){null!==t.body&&(this.devices=t.body.devices,0===this.devices.length&&this.$router.push({name:"DevicesClaim"}))},function(e){console.log(e),t.notifyError(e.status,e.body.message)})},loadProjects:function(){var t=this,e=m.getters.baseUrl+"/api/v2/projects";this.$http.get(e).then(function(t){null!==t.body.data&&(this.projects=t.body.projects)},function(e){console.log(e),t.notifyError(e.status,e.body.message)})},notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},jt=Ct,$t=(i("4980"),Object(_["a"])(jt,ut,dt,!1,null,null,null)),Et=$t.exports,At=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",[i("v-flex",{attrs:{"mt-4":"",xs12:"","offset-md2":"",md8:""}},[i("v-card",{staticClass:"upy-card ma-2"},[i("v-card-text",{staticClass:"pb-5",attrs:{"pb-4":""}},[i("v-list",{attrs:{subheader:"","two-line":""}},[i("v-subheader",{staticClass:"project"},[t._v("Projects")]),t._l(t.projects,function(e,a){return[i("v-divider",{key:a,staticClass:"mr-3"}),i("v-list-tile",{key:e._id,staticClass:"mr-3",on:{click:function(i){return t.openProject(e._id)}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.name))]),i("v-list-tile-sub-title")],1),i("v-list-tile-action",[i("v-icon",[t._v("settings")])],1)],1)]})],2)],1)],1),i("v-btn",{attrs:{fixed:"",right:"",bottom:"",fab:"",color:"info"},on:{click:t.addProject}},[i("v-icon",[t._v("add")])],1)],1),i("v-dialog-name",{ref:"confirm"})],1)},Dt=[],Pt={name:"Projects",props:["config"],data:function(){return{user:m.getters.user,projects:[]}},components:{"v-dialog-name":X},created:function(){this.loadProjects()},mounted:function(){l.$emit("set-title","manage projects")},methods:{openProject:function(t){this.$router.push({name:"ProjectSettings",params:{id:t}})},addProject:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){var e,i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Add project","Please set an project name",{color:"info"});case 2:if(e=t.sent,e){t.next=6;break}return this.notifyError(400,"project name is required"),t.abrupt("return");case 6:i=m.getters.baseUrl+"/api/v2/projects",this.$http.put(i,{name:e}).then(function(t){200===t.data.status&&t.data.project.slug?this.$router.push({name:"ProjectSettings",params:{id:t.data.project._id}}):(console.log(t.data),this.notifyError(t.body.status,t.body.error))},function(t){console.log(t),a.notifyError(t.status,t.body.message)});case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadProjects:function(){var t=this,e=m.getters.baseUrl+"/api/v2/projects";this.$http.get(e).then(function(t){null!==t.body.data&&(this.projects=t.body.projects)},function(e){console.error(e),t.notifyError(e.status,e.body.message)})},notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},St=Pt,Tt=Object(_["a"])(St,At,Dt,!1,null,null,null),Ot=Tt.exports,It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:"","grid-list-md":""}},[i("v-layout",{attrs:{"align-content-center":"",wrap:""}},[i("v-flex",{attrs:{md6:"",xs12:""}},[i("v-card",{staticClass:"upy-card"},[i("v-card-text",{staticClass:"grow"},[i("v-text-field",{staticClass:"project mr-4 ml-2",attrs:{"prepend-icon":"edit",label:"project name"},model:{value:t.project.name,callback:function(e){t.$set(t.project,"name",e)},expression:"project.name"}}),t._v("\n    version : "+t._s(t.project._v)+"\n          "),i("v-list",{attrs:{"two-line":""}},[i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.navigate("ProjectSettingsAdvanced")}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                  Project configuration\n                ")]),i("v-list-tile-sub-title",[t._v("\n                  Parameters available on all devices\n                ")])],1),i("v-list-tile-action",[i("v-icon",[t._v("settings")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.navigate("ProjectAttributes")}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                  Project attributes\n                ")]),i("v-list-tile-sub-title",[t._v("\n                  Attributes available on all devices\n                ")])],1),i("v-list-tile-action",[i("v-icon",[t._v("bookmark")])],1)],1)],1)],1)],1)],1),i("v-flex",{attrs:{xs12:"",md6:""}},[i("v-card",{staticClass:"upy-card flexcard",attrs:{height:"100%"}},[i("v-card-text",{staticClass:"grow"},[i("v-list",{attrs:{subheader:"","two-line":""}},[i("v-subheader",[t._v("Advanced")]),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.navigate("ProjectWebhooks")}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                  Webhooks\n                ")]),i("v-list-tile-sub-title",[t._v("\n                  HTTP push API provide other applications with real-time information\n                ")])],1),i("v-list-tile-action",[i("v-icon",[t._v("http")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.navigate("ProjectCloudWizard")}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                  Cloud provisioning\n                ")]),i("v-list-tile-sub-title",[t._v("\n                  AWS, Azure GCloud automatic PKI\n                ")])],1),i("v-list-tile-action",[i("v-icon",[t._v("cloud")])],1)],1)],1)],1)],1)],1),i("v-flex",{attrs:{xs12:"","pa-1":""}},[i("v-mqtt",{attrs:{configuration:t.project},on:{"mqtt-edit":t.mqttEdit}})],1),i("v-flex",[i("v-card",{staticClass:"upy-card"},[i("v-card-text",{staticClass:"grow"},[i("v-subheader",[t._v("Advanced settings")]),i("v-list",{attrs:{"two-line":""}},[i("v-divider",{staticClass:"mr-3"}),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.duplicateProject()}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("file_copy")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Duplicate project")]),i("v-list-tile-sub-title",[t._v("make a copy so you get all same settings")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{staticClass:"warning",on:{click:function(e){return t.deleteProject()}}},[i("v-list-tile-avatar",[i("v-icon",{attrs:{large:"",color:"yellow"}},[t._v("delete")])],1),i("v-list-tile-content",[i("v-list-tile-title",{staticClass:"black--text"},[t._v("Delete Project")]),i("v-list-tile-sub-title",{staticClass:"black--text"},[t._v("delete this project, all settings and data")])],1)],1)],1)],1)],1)],1),i("v-btn",{attrs:{fab:"",fixed:"",bottom:"",right:"",color:"primary"},nativeOn:{click:function(e){return t.saveProject()}}},[i("v-icon",[t._v("done")])],1),i("v-confirm",{ref:"confirm"})],1),i("v-confirm",{ref:"confirm"}),i("v-dialog-name",{ref:"dialogName"})],1)},Ut=[],Lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.config&&t.config.mqtt?i("v-card",{staticClass:"upy-card"},[i("v-card-title",[t._v("\n      MQTT Settings\n    ")]),i("v-card-text",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{md3:"",xs6:""}},[i("v-switch",{attrs:{label:"Enable MQTT"},model:{value:t.config.enable_mqtt,callback:function(e){t.$set(t.config,"enable_mqtt",e)},expression:"config.enable_mqtt"}})],1),t.config.mqtt_hook&&t.config.enable_mqtt?i("v-flex",{attrs:{md3:"",xs6:""}},[i("v-switch",{attrs:{label:"Project defaults"},on:{change:t.onProjectDefault},model:{value:t.config.mqtt_project_default,callback:function(e){t.$set(t.config,"mqtt_project_default",e)},expression:"config.mqtt_project_default"}})],1):t._e(),t.config.enable_mqtt?i("v-flex",{attrs:{md3:"",xs6:""}},[i("v-switch",{attrs:{label:"Platform defaults"},on:{change:t.onPlatformDefault},model:{value:t.config.mqtt_platform_default,callback:function(e){t.$set(t.config,"mqtt_platform_default",e)},expression:"config.mqtt_platform_default"}},[t._v(" "+t._s(t.config.mqtt_platform_default)+"\n      ")])],1):t._e(),t.config.enable_mqtt?i("v-flex",{attrs:{xs10:""}},[i("v-text-field",{staticClass:"mr-4 ml-2",attrs:{disabled:t.onDefault,label:"Server"},on:{change:t.onChanged},model:{value:t.config.mqtt.server,callback:function(e){t.$set(t.config.mqtt,"server",e)},expression:"config.mqtt.server"}})],1):t._e(),t.config.enable_mqtt?i("v-flex",{attrs:{xs2:""}},[i("v-text-field",{attrs:{disabled:t.onDefault,type:"number",label:"Port"},on:{change:t.onChanged},model:{value:t.config.mqtt.port,callback:function(e){t.$set(t.config.mqtt,"port",e)},expression:"config.mqtt.port"}})],1):t._e(),t.config.enable_mqtt&&t.config.mqtt_platform_default?i("v-flex",{attrs:{md2:"",xs6:""}},[i("v-switch",{attrs:{label:"Store message"},on:{change:t.onChanged},model:{value:t.config.store_messages,callback:function(e){t.$set(t.config,"store_messages",e)},expression:"config.store_messages"}})],1):t._e(),t.config.enable_mqtt&&t.config.store_messages&&t.config.mqtt_platform_default?i("v-flex",{attrs:{md4:"",xs6:""}},[i("v-slider",{staticClass:"pr-4",attrs:{step:"1",tick:"",label:t.config.retention_days+" days of storage",max:"90",min:"0"},model:{value:t.config.retention_days,callback:function(e){t.$set(t.config,"retention_days",e)},expression:"config.retention_days"}})],1):t._e()],1)],1)],1):t._e()},Rt=[],qt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",{attrs:{width:"120"}},[i("v-flex",{attrs:{xs11:""}},[i("label",[t._v("Please select "+t._s(t.kind)+" PEM file for "+t._s(t.target)+" "+t._s(t.linkTo.name))]),i("v-text-field",{attrs:{"max-width":"120"}})],1),i("v-flex",{attrs:{xs1:"","text-xs-center":""}},[i("upload-btn",{attrs:{label:"plop",icon:"",primary:"",fileChangedCallback:t.pemUpload}},[i("template",{slot:"icon"},[i("v-icon",[t._v("cloud_upload")])],1)],2)],1)],1)},Mt=[],Wt=i("82e0"),zt=i.n(Wt),Nt={props:["kind","linkTo","target"],components:{"upload-btn":zt.a},data:function(){return{dialog:!1}},methods:{pemUpload:function(t){var e=m.getters.baseUrl+"/api/v2/"+this.target+"/"+this.linkTo._id+"/"+this.target+"/certificate";console.log(e);var i=new FormData;i.append("file",t),this.$http.post(e,i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){this.$emit("onUpdate",!0)}).catch(function(t){this.notifyError(t.status,t.statusText)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},Bt=Nt,Ft=Object(_["a"])(Bt,qt,Mt,!1,null,null,null),Vt=Ft.exports,Kt={name:"MQTT",props:["configuration"],data:function(){return{config:{mqtt:{}},mqttOn:!1,mqtt_platform_defaults:{}}},components:{"v-cert-upload":Vt},computed:{onDefault:function(){return this.config.mqtt_project_default||this.config.mqtt_platform_default}},watch:{configuration:function(t){this.config=t},days:function(t){t&&(this.config.retention_days=t,this.onChanged())}},mounted:function(){var t=this;this.config=Object.assign({},this.configuration);var e=m.getters.baseUrl+"/api/v2/applications/mqtt_platform_defaults";this.$http.get(e).then(function(t){t.data&&t.data.mqtt_platform_defaults?this.mqtt_platform_defaults=t.data.mqtt_platform_defaults:this.notifyError(500,"unable to get mqtt platform_defaultform defaults")},function(e){t.notifyError(e.status,e.statusText)})},methods:{notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},onPlatformDefault:function(t){t&&(console.log("onPlatformDefault!",t),this.config.mqtt_project_default&&(this.config.mqtt_project_default=!1),this.config.mqtt=Object.assign({},this.mqtt_platform_defaults),this.config.store_messages=!0,this.config.retention_days||(this.config.retention_days=30),this.onChanged())},onProjectDefault:function(t){this.config.mqtt_platform_default&&(this.config.mqtt_platform_default=!1),this.config.mqtt.server=this.config.mqtt_hook.AWS_CA.endpoint,this.config.mqtt.port=8883,this.config.mqtt.ssl=!0,this.config.mqtt.ssl_params={ca_file:"/flash/cert/aws-ca.pem"},this.config.store_messages=!0,this.config.retention_days||(this.config.retention_days=30),this.onChanged()},onChanged:function(){JSON.stringify(this.config)!==JSON.stringify(this.configuration)&&this.$emit("mqtt-edit",this.config)}}},Ht=Kt,Yt=Object(_["a"])(Ht,Lt,Rt,!1,null,null,null),Gt=Yt.exports,Jt={name:"Project",data:function(){return{user:m.getters.user,project:{configuration:{data:{}}},version:0}},components:{"v-confirm":H,"v-mqtt":Gt,"v-dialog-name":X},created:function(){this.loadProject(this.$route.params.id)},mounted:function(){l.$emit("set-title","Project settings")},methods:{mqttEdit:function(t){console.log("parent got edit",t),this.project.mqtt=t},saveProject:function(){var t=this,e=m.getters.baseUrl+"/api/v2/project/"+this.project._id,i=this.project;this.$http.post(e,i).then(function(t){this.$router.push({name:"Projects"})},function(e){t.notifyError(e.status,e.body.message)})},loadProject:function(t){var e=this,i=m.getters.baseUrl+"/api/v2/project/"+t;this.$http.get(i).then(function(t){200===t.body.status?t.data&&t.data.project&&(this.project=t.data.project):this.notifyError(t.body.status,t.body.error)},function(t){e.notifyError(t.status,t.statusText)})},duplicateProject:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.dialogName.open("Duplicate project","Please select new project name",{color:"info"});case 2:i=t.sent,a=m.getters.baseUrl+"/api/v2/project/"+this.project._id+"/duplicate/"+i,this.$http.get(a).then(function(t){this.$router.push({name:"Projects"})},function(t){n.notifyError(t.status,t.statusText)});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),deleteProject:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete project","Are you sure?",{color:"warning"});case 2:if(!t.sent){t.next=5;break}i=m.getters.baseUrl+"/api/v2/project/"+this.project._id,this.$http.delete(i).then(function(t){this.$router.push({name:"Projects"})},function(t){a.notifyError(t.status,t.statusText)});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},navigate:function(t){this.$router.push({name:t,params:{id:this.project._id,project:this.project}})}}},Qt=Jt,Zt=(i("f401"),Object(_["a"])(Qt,It,Ut,!1,null,"58cb31f6",null)),Xt=Zt.exports,te=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticClass:"white"},[i("v-project-card-title",{attrs:{project:t.project}}),i("v-card-text",[i("json-editor",{ref:"editor",attrs:{onChange:t.onConfigChange,json:t.attributes}})],1),i("v-layout",{attrs:{absolute:"",bottom:"",right:""}},[i("v-btn",{attrs:{fab:"",color:"default"},nativeOn:{click:function(e){return t.navigate("ProjectSettings")}}},[i("v-icon",[t._v("close")])],1),i("v-btn",{attrs:{fab:"",color:"primary"},nativeOn:{click:function(e){return t.saveProject()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1)],1)],1)},ee=[],ie=i("33c3"),ae=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.project?i("v-card-title",{staticClass:"black"},[i("v-layout",[i("v-flex",{attrs:{xs12:""}},[t._v("\n   .: "+t._s(t.project.uname)+" :. "+t._s(t.project.name)),i("br")])],1)],1):t._e()},ne=[],se={name:"WifiSettingsLine",props:["project","subtitle"]},oe=se,re=Object(_["a"])(oe,ae,ne,!1,null,null,null),ce=re.exports,le={name:"ProjectAttributes",components:{"json-editor":ie["a"],"v-project-card-title":ce},data:function(){return{project:{},attributes:null,output:null,mode:"tree"}},created:function(){this.loadProject(this.$route.params.id)},mounted:function(){l.$emit("set-title","Attributes project settings");var t=this.$refs.editor.editor;t.setMode(this.mode)},methods:{onConfigChange:function(t){this.output=Object.assign({},t)},saveProject:function(){var t=this,e=m.getters.baseUrl+"/api/v2/project/"+this.$route.params.id+"/attributes",i=Object.assign({},this.output);console.log(i),this.$http.post(e,i).then(function(t){this.$router.push({name:"ProjectSettings",params:{id:this.$route.params.id}})},function(e){console.log(e),console.log("error here"),t.notifyError(e.status,e.body.message)})},loadProject:function(){var t=this,e=m.getters.baseUrl+"/api/v2/project/"+this.$route.params.id+"/attributes",i=this;this.$http.get(e).then(function(t){if(t.data.project)if(this.project=t.data.project,l.$emit("set-title",this.project.name+" attributes"),t.data&&t.data.attributes){this.attributes=t.data.attributes,this.output=t.data.attributes;var e=i.$refs.editor.editor;setTimeout(function(){e.expandAll()},1)}else this.attributes={},this.notifyError(500,"an empty attributes has been created")},function(e){t.notifyError(e.status,e.statusText)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},navigate:function(t){this.$router.push({name:t,params:{id:this.project._id}})}}},ue=le,de=(i("28fb"),Object(_["a"])(ue,te,ee,!1,null,null,null)),pe=de.exports,ve=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",[i("v-flex",{attrs:{"mt-2":"",xs12:"","offset-md2":"",md8:""}},[this.webhook?i("v-webhook",{attrs:{webhook:this.webhook},on:{onChange:t.onWebhookChanged}}):t._e(),this.webhook?t._e():i("v-card",{staticClass:"upy-card",attrs:{"mt-2":""}},[i("v-card-text",{staticClass:"pb-5",attrs:{"pb-4":""}},[i("v-list",{attrs:{subheader:"","two-line":""}},[i("v-subheader",[t._v("Webhooks")]),t._l(t.webhooks,function(e,a){return[i("span",{key:a},[i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{staticClass:"mr-3",on:{click:function(e){return t.editWebhook(a)}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                          "+t._s(e.method)+" "+t._s(e.url)+"\n                         ")])],1),i("v-list-tile-action",[i("v-icon",[t._v("edit")])],1)],1)],1)]})],2)],1),i("v-card-actions",[i("v-btn",{staticClass:"primary",attrs:{flat:""},on:{click:function(e){return t.addWebhook()}}},[t._v("Add webhook")])],1),i("v-btn",{attrs:{absolute:"",right:"",bottom:"",fab:"",color:"info"},on:{click:function(e){return t.saveWebhooks()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1)},fe=[],he=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"upy-card",attrs:{"mt-2":""}},[i("v-card-text",{staticClass:"pb-5",attrs:{"pb-4":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{"mt-3":"",xs2:""}},[i("v-btn",{attrs:{color:t.btnColor},on:{click:function(e){return t.toggleMethod()}}},[t._v("\n        "+t._s(t.webhook.method)+"\n      ")])],1),i("v-flex",{attrs:{xs10:"","pr-1":""}},[i("v-text-field",{attrs:{"hide-details":"",outline:"","full-width":"",label:"url",rules:[t.rules.required,t.rules.url]},model:{value:t.webhook.url,callback:function(e){t.$set(t.webhook,"url",e)},expression:"webhook.url"}})],1),i("v-expansion-panel",{staticClass:"mt-4",attrs:{popout:""},model:{value:t.panel,callback:function(e){t.panel=e},expression:"panel"}},[i("v-expansion-panel-content",{key:"1",scopedSlots:t._u([{key:"header",fn:function(){return[i("div",[t._v("Filter")])]},proxy:!0}])},[i("v-message-filter",{attrs:{filters:t.webhook.filters},on:{onChange:t.onFiltersChange}})],1),i("v-expansion-panel-content",{key:"2",scopedSlots:t._u([{key:"header",fn:function(){return[i("div",[t._v("Headers")])]},proxy:!0}])},[i("v-http-headers",{attrs:{headers:t.webhook.headers},on:{onChange:t.onHeadersChange}})],1),i("v-expansion-panel-content",{key:"3",scopedSlots:t._u([{key:"header",fn:function(){return[i("div",[t._v("Body")])]},proxy:!0}])},[i("codemirror",{ref:"editor",staticClass:"bodyCode",attrs:{options:t.editorOptions,value:t.webhook.body},on:{change:t.bodyChange}})],1)],1)],1)],1),i("v-card-actions",[i("v-btn",{staticClass:"warning",attrs:{flat:""},on:{click:t.deleteWebhook}},[t._v("delete")])],1),i("v-btn",{attrs:{absolute:"",right:"",bottom:"",fab:"",color:"info"},on:{click:t.submit}},[i("v-icon",[t._v("done")])],1)],1)},me=[],ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-flex",{attrs:{xs12:""}},[i("v-data-table",{staticClass:"elevation-1",attrs:{"hide-headers":"","hide-actions":"",headers:t.cols,items:t.headers},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.key))]),i("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.value))]),i("td",{staticClass:"justify-center layout px-0"},[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){return t.editItem(e.item)}}},[t._v("\n            edit\n          ")]),i("v-icon",{attrs:{small:""},on:{click:function(i){return t.deleteItem(e.item)}}},[t._v("\n            delete\n          ")])],1)]}}])},[i("template",{slot:"footer"},[0===t.headers.length?i("v-btn",{on:{click:t.initialize}},[t._v("\n            Reset\n        ")]):t._e(),i("v-dialog",{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-btn",{staticClass:"mb-2",attrs:{slot:"activator"},slot:"activator"},[t._v("New HTTP Header")]),i("v-card",{staticClass:"upy-card"},[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[i("v-text-field",{attrs:{label:"Header"},model:{value:t.editedItem.key,callback:function(e){t.$set(t.editedItem,"key",e)},expression:"editedItem.key"}})],1),i("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[i("v-text-field",{attrs:{label:"Value"},model:{value:t.editedItem.value,callback:function(e){t.$set(t.editedItem,"value",e)},expression:"editedItem.value"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)],1)],2)],1)},be=[],_e=[{key:"Content-Type",value:"application/json"}],ye={props:["headers"],name:"HTTPHeaders",data:function(){return{dialog:!1,cols:[{text:"HTTP Header",sortable:!1,align:"left",value:"key"},{text:"value",align:"left",value:"value",sortable:!1},{text:"edit",align:"left",value:"edit",sortable:!1}],editedIndex:-1,editedItem:{key:"",value:""},defaultItem:{key:"",value:""},editorOptions:{lineNumber:!1},content_types:["application/json","application/octet-stream"]}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},methods:{initialize:function(){this.headers=_e.slice(0)},editItem:function(t){this.editedIndex=this.headers.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this.headers.indexOf(t);confirm("Are you sure you want to delete this item?")&&this.headers.splice(e,1),this.$emit("onChange",this.headers)},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1,t.$emit("onChange",t.headers)},300)},save:function(){this.editedIndex>-1?Object.assign(this.headers[this.editedIndex],this.editedItem):this.headers.push(this.editedItem),this.close()}}},xe=ye,we=Object(_["a"])(xe,ge,be,!1,null,null,null),ke=we.exports,Ce=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-flex",{attrs:{xs12:""}},[i("v-data-table",{staticClass:"elevation-1",attrs:{"hide-actions":"",headers:t.cols,items:t.filters},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",[t._v(t._s(e.item.key))]),i("td",[t._v(t._s(e.item.operator))]),i("td",[t._v(t._s(e.item.value))]),i("td",{staticClass:"text-xs-right"},[i("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(i){return t.editItem(e.item)}}},[t._v("\n          edit\n        ")]),i("v-icon",{attrs:{small:""},on:{click:function(i){return t.deleteItem(e.item)}}},[t._v("\n          delete\n        ")])],1)]}}])},[i("template",{slot:"footer"},[0===t.filters.length?i("v-btn",{on:{click:t.initialize}},[t._v("Reset")]):t._e(),i("v-dialog",{attrs:{"max-width":"580px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-btn",{staticClass:"mb-2",attrs:{slot:"activator"},slot:"activator"},[t._v("New message filter")]),i("v-card",{staticClass:"upy-card"},[i("v-card-title",[i("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),i("v-card-text",[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{wrap:"","justify-end":"","align-end":""}},[i("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[i("v-select",{attrs:{disabled:"",items:t.keys,label:"Key"},model:{value:t.editedItem.key,callback:function(e){t.$set(t.editedItem,"key",e)},expression:"editedItem.key"}}),"topic"!==t.editedItem.key?i("v-text-field",{attrs:{rules:t.keyRules,label:t.editedItem.key.split(".")[0]},model:{value:t.editedItem.key,callback:function(e){t.$set(t.editedItem,"key",e)},expression:"editedItem.key"}}):t._e()],1),i("v-flex",{attrs:{xs12:"",sm6:"",md4:""}},[i("v-select",{attrs:{disabled:"",items:t.operators,label:"Operators"},model:{value:t.editedItem.operator,callback:function(e){t.$set(t.editedItem,"operator",e)},expression:"editedItem.operator"}})],1),i("v-flex",{attrs:{"text-xs-right":"","align-end":"",xs12:"",sm6:"",md4:""}},[i("v-spacer"),i("v-text-field",{attrs:{label:"Value"},model:{value:t.editedItem.value,callback:function(e){t.$set(t.editedItem,"value",e)},expression:"editedItem.value"}})],1)],1)],1)],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.close}},[t._v("Cancel")]),i("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1)],1)],2)],1)},je=[],$e=[{key:"topic",operator:"MATCH",value:"*"}],Ee={props:["filters"],name:"MessageFilter",watch:{dialog:function(t){-1===this.editedIndex&&(this.editedItem=Object.assign({},this.defaultItem)),console.log("dialog open with",this.editedItem)}},data:function(){return{keyRules:[function(t){return!!t||"Key is required"},function(t){return/^[data|attributes|topic].*[^.]$/.test(t)||"Key must be valid"}],filterMode:"topic",keys:[{value:"topic",text:"topic"},{value:"data.",text:"data"},{value:"attributes.",text:"attributes"}],operators:[{value:"MATCH",text:"match"},{value:"GT",text:"greater than"},{value:"LT",text:"lower than"},{value:"EQ",text:"equal"}],dialog:!1,cols:[{text:"key",align:"left",value:"value",sortable:!1},{text:"operator",align:"left",value:"value",sortable:!1},{text:"value",align:"left",value:"edit",sortable:!1},{text:"edit",align:"left",value:"edit",sortable:!1}],editedIndex:-1,editedItem:{key:"",value:""},defaultItem:{key:"topic",operator:"MATCH",value:"/"}}},computed:{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},methods:{initialize:function(){this.filters=$e.slice(0),console.log("initialize!")},editItem:function(t){console.log("editItem"),this.editedIndex=this.filters.indexOf(t),this.editedItem=Object.assign({},t),this.dialog=!0},deleteItem:function(t){var e=this.filters.indexOf(t);confirm("Are you sure you want to delete this item?")&&this.filters.splice(e,1),this.$emit("onChange",this.filters)},close:function(){var t=this;this.dialog=!1,setTimeout(function(){t.editedItem=Object.assign({},t.defaultItem),t.editedIndex=-1,t.$emit("onChange",t.filters)},300)},save:function(){this.editedIndex>-1?Object.assign(this.filters[this.editedIndex],this.editedItem):this.filters.push(this.editedItem),this.close()}}},Ae=Ee,De=Object(_["a"])(Ae,Ce,je,!1,null,null,null),Pe=De.exports;i("f9d4"),i("693d"),i("9b74"),i("f6b6"),i("3c98");var Se=/(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/,Te={props:["webhook"],name:"Webhooks",components:{"v-http-headers":ke,"v-message-filter":Pe},data:function(){return{panel:null,editorOptions:{lineNumber:!1},rules:{required:function(t){return!!t||"Required."},url:function(t){return Se.test(t)||"Invalid e-mail."}}}},computed:{btnColor:function(){return"GET"===this.webhook.method?"red":"blue"},formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}},methods:{submit:function(){this.$emit("onChange",this.webhook)},deleteWebhook:function(){this.$emit("onChange",null)},onFiltersChange:function(t){this.webhook.filters=t.slice(0)},onHeadersChange:function(t){this.webhook.headers=t.slice(0)},bodyChange:function(t){this.webhook.body=t},toggleMethod:function(){"GET"===this.webhook.method?this.webhook.method="POST":this.webhook.method="GET"}}},Oe=Te,Ie=(i("ea71"),Object(_["a"])(Oe,he,me,!1,null,null,null)),Ue=Ie.exports,Le={method:"POST",filters:[],url:null,headers:[{key:"Content-Type",value:"application/json"}],body:"{ data: {{data}}, payload: {{payload}}, topic: {{topic}} }"},Re={name:"Webhooks",components:{"v-webhook":Ue},data:function(){return{project:{},user:m.getters.user,webhooks:[],webhook:null,editedIndex:-1}},mounted:function(){this.loadProject(this.$route.params.id),l.$emit("set-title","webhooks")},methods:{onWebhookChanged:function(t){console.log("wh changed",t),null===t?this.webhooks.splice(this.editItem,1):this.webhooks[this.editItem]=t,this.webhook=null,this.editItem=-1,this.saveWebhooks(!1)},editWebhook:function(t){this.editItem=t,this.webhook=Object.assign({},this.webhooks[t])},addWebhook:function(){this.webhooks.push(Object.assign({},Le)),this.editWebhook(this.webhooks.length-1)},notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},loadProject:function(t){var e=this,i=m.getters.baseUrl+"/api/v2/project/"+t;this.$http.get(i).then(function(t){t.data&&t.data.project&&(this.project=t.data.project,this.webhooks=t.data.project.webhooks||[],l.$emit("set-title",this.project.name+"'s webhooks"))},function(t){e.notifyError(t.status,t.statusText)})},saveWebhooks:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],i=m.getters.baseUrl+"/api/v2/project/"+this.$route.params.id+"/webhooks";this.$http.post(i,{webhooks:this.webhooks}).then(function(t){200===t.body.status?e&&this.$router.push({name:"ProjectSettings",params:{id:this.$route.params.id}}):this.notifyError(t.body.status,t.body.error)},function(e){console.log(e),t.notifyError(e.status,e.body.message)})}}},qe=Re,Me=Object(_["a"])(qe,ve,fe,!1,null,null,null),We=Me.exports,ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",[i("v-flex",{attrs:{"mt-2":"",xs12:"","offset-md1":"",md10:""}},[i("v-card",{staticClass:"upy-card"},[i("v-card-text",{staticClass:"pb-5",attrs:{"pb-4":""}},[i("v-layout",{attrs:{grid:"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-switch",{staticClass:"mb-0",attrs:{label:"Enable Cloud Integration"},model:{value:t.cloudOn,callback:function(e){t.cloudOn=e},expression:"cloudOn"}}),t.cloudOn?i("v-select",{staticClass:"mr-4 mt-0",attrs:{items:t.expires,label:"Signed certificates expires after"},model:{value:t.deviceExpire,callback:function(e){t.deviceExpire=e},expression:"deviceExpire"}}):t._e()],1),t.cloudOn?i("v-flex",{attrs:{xs6:""}},[i("v-radio-group",{attrs:{mandatory:!1},model:{value:t.kind,callback:function(e){t.kind=e},expression:"kind"}},[i("v-radio",{attrs:{label:"Amazon IoT Hub",value:"AWS_CA"}}),i("v-radio",{attrs:{disabled:"",label:"Azure IoT Hub",value:"AZURE_CA"}})],1)],1):t._e(),t.cloudOn?i("v-flex",{attrs:{xs12:""}},[i("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{rules:t.awsEndpointRules,hint:t.endpointhint,label:"endpoint"},on:{change:function(e){return t.saveWizard(!1)}},model:{value:t.endpoint,callback:function(e){t.endpoint=e},expression:"endpoint"}})],1)],1):t._e(),t.cloudOn&&t.valid?i("v-flex",{attrs:{xs12:""}},[i("p",[t._v("Intermediate CAs")]),i("v-data-table",{staticClass:"elevation-1",attrs:{"hide-actions":"",headers:t.tabHeaders,items:t.certificates},scopedSlots:t._u([{key:"items",fn:function(e){return[i("td",[i("v-radio-group",{model:{value:t.activeCA,callback:function(e){t.activeCA=e},expression:"activeCA"}},[i("v-radio",{attrs:{value:e.item._id}})],1)],1),i("td",{staticClass:"text-truncate"},[t._v("\n                  "+t._s(e.item.decoded&&e.item.decoded.serial)+"\n                  "),i("br"),t._v("\n                  "+t._s(e.item.data.registrationCode&&"registration code "+e.item.data.registrationCode.substr(0,16)+"...")+"\n                  "+t._s(e.item.data.AWSCertificateId&&"certificate-id "+e.item.data.AWSCertificateId)+"\n\n                  "),i("br"),e.item.data&&e.item.data.registrationCode?t._e():i("v-btn",{staticClass:"warning",attrs:{small:""},on:{click:function(i){return t.startAWSRegistration(e.item._id)}}},[i("v-icon",[t._v("verified_user")]),t._v("\n                    sign registration code\n                  ")],1)],1),i("td",[t._v(t._s(e.item.decoded&&new Date(e.item.decoded.notBefore).toLocaleDateString()))]),i("td",[t._v(t._s(e.item.decoded&&new Date(e.item.decoded.notAfter).toLocaleDateString()))]),i("td",{staticClass:"text-xs-center"},[i("v-btn",{attrs:{small:""},on:{click:function(i){return t.deleteCA(e.item._id)}}},[i("v-icon",[t._v("delete")]),t._v("\n                    delete\n                  ")],1)],1)]}}],null,!1,2067437119)})],1):t._e(),t.cloudOn&&t.valid?i("v-flex",{staticClass:"text-xs-center pt-2 xs12"},[i("v-btn",{staticClass:"info",attrs:{small:"",right:""},on:{click:function(e){return t.createCA()}}},[i("v-icon",[t._v("add")]),t._v("\n              create a CA\n            ")],1)],1):t._e(),t.hasCert?i("v-flex",[i("p",[t._v(" Activate on AWS IoT Hub")]),t._v("\n            x "+t._s(this.activeCA)+" x\n             "),i("v-expansion-panel",[i("v-expansion-panel-content",[i("div",{attrs:{slot:"header"},slot:"header"},[i("v-icon",{attrs:{left:"",color:"warning"}},[t._v("cloud_download")]),t._v("\n                   Download the following files\n                 ")],1),i("v-card",{staticClass:"md-6"},[i("v-card-text",{staticClass:"md-6"},[t.activeCA?t._e():i("p",{staticClass:"error text-xs-center"},[t._v("activate a certificate")]),t.hasCert?i("v-btn",{staticClass:"info",attrs:{small:"",enabled:null!==t.awsCA.data.cert},on:{click:function(e){return t.download(t.awsCA.data.cert,t.project.slug+"-ca.pem")}}},[i("v-icon",{attrs:{left:""}},[t._v("cloud_download")]),t._v("\n                   "+t._s(t.project.slug)+"-ca.pem\n                 ")],1):t._e(),t.hasCert?i("v-btn",{staticClass:"info",attrs:{small:"",enabled:null!==t.awsVerificationCA},on:{click:function(e){return t.download(t.awsVerificationCA,t.project.slug+"-verification.pem")}}},[i("v-icon",{attrs:{left:""}},[t._v("cloud_download")]),t._v("\n                   "+t._s(t.project.slug)+"-verification.pem\n                 ")],1):t._e(),t.hasCert?i("v-btn",{staticClass:"info",attrs:{small:""},on:{click:function(e){return t.downloadAWSPolicyTemplate()}}},[i("v-icon",{attrs:{left:""}},[t._v("cloud_download")]),t._v("\n                   "+t._s(t.project.slug)+"-policy-template.json\n                 ")],1):t._e()],1)],1)],1),i("v-expansion-panel-content",[i("div",{attrs:{slot:"header"},slot:"header"},[i("v-icon",{attrs:{left:"",color:"warning"}},[t._v("code")]),t._v("\n                 Run the following commands")],1),i("v-card",[i("v-card-text",[i("p",[t._v("please check you have created a JITPRole:\n                     "),i("code",[t._v("aws iam get-role --role-name JITPROLE")])]),i("p",[i("code",{staticClass:"mycode"},[t._v("aws iot create-thing-group --thing-group-name "+t._s(t.project.slug)+" ")])]),i("p",[i("code",{staticClass:"mycode"},[t._v("aws iot register-ca-certificate --ca-certificate file://"+t._s(t.project.slug)+"-CA.pem \\\n                     --verification-cert file://"+t._s(t.project.slug)+"-verification.pem")])]),i("p",[i("v-text-field",{attrs:{value:"certificateId","prepend-icon":"edit",label:"please enter your certificate-id"},on:{change:function(e){return t.saveWizard(!1)}},model:{value:t.certificateId,callback:function(e){t.certificateId=e},expression:"certificateId"}})],1),i("p",[i("code",{staticClass:"mycode"},[t._v("aws iot update-ca-certificate  --new-status ACTIVE \\\n  --certificate-id "+t._s(t.certificateId||"xxxxxxxxxxx")+" ")])]),i("p",[i("code",{staticClass:"mycode"},[t._v("aws iot update-ca-certificate \\\n  --certificate-id "+t._s(t.certificateId||"xxxxxxxxxxx")+"  \\\n  --new-auto-registration-status ENABLE \\\n  --registration-config file://"+t._s(t.project.slug)+"-policy-template.json")])])])],1)],1)],1)],1):t._e()],1)],1),i("v-card-actions",[i("v-btn",{staticClass:"info",attrs:{flat:"",href:"https://youspot.gitbook.io/documentation/documentation/aws-iot-integration"}},[i("v-icon",{attrs:{left:""}},[t._v("help")]),t._v("\n          help\n        ")],1)],1),i("v-btn",{attrs:{absolute:"",right:"",bottom:"",fab:"",color:"info"},on:{click:function(e){return t.saveWizard(!1)}}},[i("v-icon",[t._v("done")])],1)],1),i("v-dialog-name",{ref:"registrationCode"}),i("v-confirm",{ref:"confirm"})],1)],1)},Ne=[];i("28a5");function Be(t,e){return{Version:"2012-10-17",Statement:[{Effect:"Allow",Action:["iot:Connect"],Resource:["*"]},{Effect:"Allow",Action:["iot:Publish"],Resource:["*"]},{Effect:"Allow",Action:["iot:Subscribe"],Resource:["*"]}]}}function Fe(t,e){return!(!e||!t)&&{Parameters:{"AWS::IoT::Certificate::CommonName":{Type:"String"},"AWS::IoT::Certificate::Id":{Type:"String"},"AWS::IoT::Certificate::OrganizationalUnit":{Type:"String"}},Resources:{thing:{Type:"AWS::IoT::Thing",Properties:{ThingName:{Ref:"AWS::IoT::Certificate::CommonName"},ThingGroups:[{Ref:"AWS::IoT::Certificate::OrganizationalUnit"}]}},certificate:{Type:"AWS::IoT::Certificate",Properties:{CertificateId:{Ref:"AWS::IoT::Certificate::Id"},Status:"ACTIVE"}},policy:{Type:"AWS::IoT::Policy",Properties:{PolicyDocument:JSON.stringify(Be())}}}}}function Ve(t,e){return{templateBody:JSON.stringify(Fe(t,e)),roleArn:"arn:aws:iam::".concat(t,":role/JITPRole")}}var Ke,He,Ye={name:"ProjectIntegrations",components:{"v-dialog-name":X,"v-confirm":H},data:function(){return{expires:[{value:"26280h",text:"3 years"},{value:"8760h",text:"1 year"},{value:"2190h",text:"3 months"},{value:"72h",text:"3 days"}],deviceExpire:"3y",activeCA:null,certificateId:null,valid:!1,project:{},user:m.getters.user,cloudOn:!1,kind:"AWS_CA",endpoint:"",cloudComplete:!1,certificates:[],awsEndpointRules:[function(t){return!!t||"endpoint is required, use aws iot describe-endpoint to get it."},function(t){return/[\w]\.iot\.(ap-south-1|eu-west-3|eu-west-2|eu-west-1|ap-northeast-3|ap-northeast-2|ap-northeast-1|sa-east-1|ca-central-1|ap-southeast-1|ap-southeast-2|eu-central-1|us-east-1|us-east-2|us-west-1|us-west-2)\.amazonaws\.com/.test(t)||"This is not a valid AWS endpoint"}],tabHeaders:[{text:"current",value:"current"},{text:"fingerprint",value:"fingerprint"},{text:"not before",value:"notBefore"},{text:"not after",value:"notAfter"},{text:"action",value:"action",sortable:!1}]}},computed:{tabedCerts:function(){return[]},hasCert:function(){for(var t=0;t<this.certificates.length;t++){var e=this.certificates[t];if("AWS_CA"===e.kind&&e.data.cert)return!0}return!1},awsCA:function(){for(var t=0;t<this.certificates.length;t++){var e=this.certificates[t];if(console.log(e),"AWS_CA"===e.kind&&e.data.cert)return e}return this.notifyError(500,"No certificate of kind AWS_CA found in active CA"),null},awsVerificationCA:function(){if(!this.activeCA)return this.notifyError(500,"please active a CA using the radio button"),null;for(var t=0;t<this.certificates.length;t++){var e=this.certificates[t];if(e._id===this.activeCA&&"AWS_CA"===e.kind&&e.data.verificationCert)return e.data.verificationCert}return this.notifyError(500,"no verification certificate in active CA"),null},mqttHook:function(){var t={};return t.enabled=this.cloudOn,t.activeCA=this.activeCA,t.deviceExpire=this.deviceExpire,t[this.kind]={endpoint:this.endpoint,certificateId:this.certificateId},t},endpointhint:function(){return""===this.endpoint&&"AWS_CA"===this.kind?"exemple: abcdefghijklmno.iot.us-east-1.amazonaws.com":null}},mounted:function(){this.loadProject(this.$route.params.id),l.$emit("set-title","project integrations")},methods:{createCA:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=m.getters.baseUrl+"/api/v2/project/"+this.$route.params.id+"/certificate/",this.$http.put(i).then(function(t){t.body&&200===t.body.status?this.loadProject():this.notifyError(t.body.status,t.body)},function(t){a.notifyError(t.status,t.statusText)});case 2:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),deleteCA:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete CA","Are you sure?",{color:"warning"});case 2:if(!t.sent){t.next=5;break}i=m.getters.baseUrl+"/api/v2/project/"+this.$route.params.id+"/certificate/"+e,this.$http.delete(i).then(function(t){this.loadProject(this.$route.params.id)},function(t){a.notifyError(t.status,t.statusText)});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getAWSRegion:function(){return this.endpoint.split(".")[2]},startAWSRegistration:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a,n,s=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.registrationCode.open("Registration code","Please enter registration code you got from: aws iot get-registration-code",{color:"info"});case 2:if(i=t.sent,64===i.length){t.next=6;break}return this.notifyError(403,"registration code has length of 64 characters"),t.abrupt("return");case 6:a=m.getters.baseUrl+"/api/v2/project/aws/registrationCode/"+e,n=this,this.$http.post(a,{registrationCode:i}).then(function(t){200===t.body.status?n.loadProject(n.$route.params.id):this.notifyError(t.body.status,t.body.error)},function(t){console.log(t),s.notifyError(t.status,t.body.message)});case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},parseResponse:function(t){this.project=t.project,this.certificates=t.certificates;var e=t.mqtt_hook;this.cloudOn=e.enabled,this.activeCA=e.activeCA,e&&(this.deviceExpire=e.deviceExpire,e["AWS_CA"]&&(this.endpoint=e.AWS_CA.endpoint,this.certificateId=e.AWS_CA.certificateId,this.activeCA||1!==this.certificates.length||(this.activeCA=this.certificates[0]._id)))},loadProject:function(t){var e=this,i=m.getters.baseUrl+"/api/v2/project/"+this.$route.params.id+"/mqtthook";this.$http.get(i).then(function(t){t.body&&200===t.body.status?(this.parseResponse(t.body),l.$emit("set-title",this.project.name+"'s mqtt integration")):this.notifyError(t.body.status,t.body)},function(t){e.notifyError(t.status,t.statusText)})},saveWizard:function(t){var e=this,i=m.getters.baseUrl+"/api/v2/project/"+this.$route.params.id+"/mqtthook";this.$http.post(i,{mqtt_hook:this.mqttHook}).then(function(e){200===e.body.status?t?this.$router.push({name:"ProjectSettings",params:{id:this.$route.params.id}}):(this.project=e.body.project,this.mqtt_hook=e.body.mqtt_hook,this.certificates=e.body.certificates,this.activeCA=this.mqtt_hook.activeCA,this.mqtt_hook["AWS_CA"]&&(this.endpoint=this.mqtt_hook.AWS_CA.endpoint)):this.notifyError(e.body.status,e.body.error)},function(t){console.log(t),e.notifyError(t.status,t.body.message)})},downloadAWSPolicyTemplate:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){var e,i,a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.endpoint||this.notifyError(500,"endpoint not set"),e=this.getAWSRegion(),e||this.notifyError(500,'cant read region in endpoint: "'.concat(this.endpoint,'"')),t.next=5,this.$refs.registrationCode.open("AWS Thing Policy for JITPRole","Please enter your AWS accountId, you can get it from the command\n          `aws iam get-user`. Please note that we do not store this information.",{color:"info"});case 5:i=t.sent,a=JSON.stringify(Ve(i,e)),n="".concat(this.project.slug,"-policy-template.json"),this.download(a,n);case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),download:function(t,e,i){if(t){i||(i="application/octet-stream");var a=document.createElement("a"),n=new Blob([t],{type:i});a.href=window.URL.createObjectURL(n),a.download=e,a.click()}}}},Ge=Ye,Je=(i("aceb"),Object(_["a"])(Ge,ze,Ne,!1,null,null,null)),Qe=Je.exports,Ze=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:"","grid-list-md":""}},[i("v-layout",{attrs:{"align-content-center":"",wrap:""}},[i("v-flex",{attrs:{xs12:"",md6:"","pa-1":""}},[i("v-card",{staticClass:"upy-card"},[i("v-card-title",{staticClass:"device"},[t._v("General")]),i("v-card-text",{staticClass:"grow",attrs:{height:"100%"}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs3:"","ml-1":"","mr-1":""}},[i("v-btn",{staticClass:"ma-0 mt-1 info",attrs:{small:""},on:{click:function(e){return e.stopPropagation(),t.navigate("DeviceData",t.device._id)}}},[i("v-icon",{attrs:{left:"",color:"dark--text"}},[t._v("show_chart")]),t._v("\n                  Data\n              ")],1)],1),i("v-flex",{attrs:{xs9:"","ml-4":""}},[i("v-text-field",{staticClass:"mr-3 ml-2",attrs:{"prepend-icon":"edit",label:"device name"},model:{value:t.device.name,callback:function(e){t.$set(t.device,"name",e)},expression:"device.name"}})],1),i("v-flex",{attrs:{xs4:""}},[t.device.configuration&&t.device.configuration.data?i("v-switch",{attrs:{label:"Check for update"},on:{change:t.saveUpdateOnBoot},model:{value:t.device.configuration.data.check_update_on_boot,callback:function(e){t.$set(t.device.configuration.data,"check_update_on_boot",e)},expression:"device.configuration.data.check_update_on_boot"}}):t._e()],1),i("v-flex",{attrs:{xs4:""}},[t.device.configuration&&t.device.configuration.data?i("v-switch",{attrs:{label:"Update conf & app"},on:{change:t.saveUpdateOnBoot},model:{value:t.device.configuration.data.update_on_boot,callback:function(e){t.$set(t.device.configuration.data,"update_on_boot",e)},expression:"device.configuration.data.update_on_boot"}}):t._e()],1),i("v-flex",{attrs:{xs4:""}},[t.device.configuration&&t.device.configuration.data?i("v-switch",{attrs:{label:"update firmware"},on:{change:t.saveUpdateOnBoot},model:{value:t.device.configuration.data.update_fw_on_boot,callback:function(e){t.$set(t.device.configuration.data,"update_fw_on_boot",e)},expression:"device.configuration.data.update_fw_on_boot"}}):t._e()],1)],1),i("v-list",{attrs:{"two-line":""}},[i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{attrs:{avatar:""},on:{click:function(e){return t.openDialog("DeviceProject")}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("people")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Set device projects")]),t.device.project&&t.device.project._id?i("v-list-tile-sub-title",[t._v("this device is using project "),i("b",{staticClass:"info--text"},[t._v(t._s(t.device.project.name))])]):i("v-list-tile-sub-title",[t._v("this device has no project")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{attrs:{avatar:""},on:{click:function(e){return t.openDialog("DeviceApplication")}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("apps")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Set device application")]),t.device.application&&t.device.application._id?i("v-list-tile-sub-title",[t._v("this device is using application "),i("b",{staticClass:"info--text"},[t._v(t._s(t.device.application.name))])]):i("v-list-tile-sub-title",[t._v("this device has no application")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{attrs:{avatar:""},on:{click:function(e){return t.navigate("DeviceCredentials")}}},[i("v-list-tile-avatar",[i("v-icon",{staticClass:"ml-3"},[t._v("vpn_keys")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Manage device credentials")]),i("v-list-tile-sub-title",[t._v("\n                  this device has "+t._s(t.device.access_tokens.length)+" access\n                  "),t._v("\n                  token"),t.device.access_tokens.length>0?i("span",[t._v("s")]):t._e()])],1)],1)],1)],1)],1)],1),i("v-flex",{attrs:{xs12:"",md6:"","pa-1":""}},[i("v-card",{staticClass:"upy-card fill-height"},[i("v-card-title",{staticClass:"device"},[t._v("Network settings")]),i("v-card-text",{staticClass:"grow"},[i("v-list",{attrs:{"two-line":""}},[i("v-list-tile",{on:{click:function(e){return t.navigate("DeviceWifiSettings")}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("wifi")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Wifi")]),i("v-list-tile-sub-title",[t._v("access codes and options")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.navigate("DeviceBLESettings")}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("bluetooth")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Bluetooth")]),i("v-list-tile-sub-title",[t._v("pincode and options for Bluetooth communications")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.notifyError(500,"not implemented")}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("send")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Sigfox")]),i("v-list-tile-sub-title",[t._v("RCZ, SigFox Id and PAC")])],1)],1)],1)],1)],1)],1),t.device.certificates&&t.device.certificates.length>0?i("v-flex",{attrs:{xs12:"","pa-1":""}},[i("v-card",{staticClass:"upy-card"},[i("v-subheader",[t._v("MQTT settings "+t._s(t.mqtt_platform_defaults.server))]),i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{staticClass:"ma-4",attrs:{label:"Client certificate path"},model:{value:t.device.project.mqtt.client_cert_file,callback:function(e){t.$set(t.device.project.mqtt,"client_cert_file",e)},expression:"device.project.mqtt.client_cert_file"}})],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{staticClass:"ma-4",attrs:{label:"Client key path"},model:{value:t.device.project.mqtt.certfile,callback:function(e){t.$set(t.device.project.mqtt,"certfile",e)},expression:"device.project.mqtt.certfile"}})],1)],1)],1)],1):t._e(),i("v-flex",{attrs:{xs12:"","pa-1":"","pb-4":""}},[i("v-card",{staticClass:"upy-card"},[i("v-card-title",{staticClass:"device"},[t._v("Advanced settings")]),i("v-card-text",{staticClass:"grow"},[i("v-list",{attrs:{"two-line":""}},[i("v-list-tile",{on:{click:function(e){return t.navigate("DeviceAttributes")}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("edit_attributes")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Device application's attributes")]),i("v-list-tile-sub-title",[t._v("set attributes that you can find in your device")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.navigate("DeviceSettingsAdvanced")}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("code")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Advanced configuration")]),i("v-list-tile-sub-title",[t._v("edit configuration in advanced mode")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.duplicateDevice()}}},[i("v-list-tile-avatar",[i("v-icon",[t._v("file_copy")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Duplicate device")]),i("v-list-tile-sub-title",[t._v("make a copy so you get all same settings")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{staticClass:"warning",on:{click:function(e){return t.deleteDevice()}}},[i("v-list-tile-avatar",[i("v-icon",{attrs:{large:"",color:"yellow"}},[t._v("delete")])],1),i("v-list-tile-content",[i("v-list-tile-title",{staticClass:"black--text"},[t._v("Delete device")]),i("v-list-tile-sub-title",{staticClass:"black--text"},[t._v("delete this device, all settings and data")])],1)],1)],1)],1)],1),i("v-spacer")],1),i("v-spacer"),i("v-btn",{attrs:{fab:"",fixed:"",bottom:"",right:"",color:"primary"},nativeOn:{click:function(e){return t.saveDevice()}}},[i("v-icon",[t._v("done")])],1)],1),i("v-confirm",{ref:"confirm"}),i("v-dialog-name",{ref:"dialogName"}),i("v-device-application",{attrs:{dialogSignal:t.dialogApp},on:{update:function(e){return t.loadDevice(t.device._id)}}}),i("v-device-project",{attrs:{dialogSignal:t.dialogProject},on:{update:function(e){return t.loadDevice(t.device._id)}}})],1)},Xe=[],ti=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"640"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{staticClass:"upy-card"},[t.device.application&&t.device.application.name?i("v-card-title",[t._v("\n      device is using application "+t._s(t.device.application.name)+"\n    ")]):i("v-card-title",[t._v("\n      "+t._s(t.device.name)+" has no application\n    ")]),i("v-card-text",[0===t.applications.length?i("p",{staticClass:"text-xs-center"},[t._v("\n        You have no application yet,"),i("br"),i("v-btn",{attrs:{center:""},on:{click:function(e){return t.navigate("Applications")}}},[t._v("Manage applications")])],1):t._e(),t.device.application&&t.device.application._id?i("p",{staticClass:"text-xs-center"},[i("v-btn",{attrs:{center:""},on:{click:function(e){return t.navigate("ApplicationSettings",t.device.application._id)}}},[t._v("Manage application "+t._s(t.device.application.name)+"\n        ")])],1):t._e(),!(t.applications.length>0)||t.device.application&&t.device.application._id?t._e():i("v-list",{attrs:{subheader:"","two-line":""}},[i("v-subheader",[t._v("please select an application below using the button")]),t._l(t.applications,function(e,a){return[i("v-list-tile",{key:a+"ws",staticClass:"mr-3"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.name))]),i("v-list-tile-sub-title",[t._v(t._s(e.slug))])],1),i("v-list-tile-action",[i("v-btn",{staticClass:"info",on:{click:function(i){return i.preventDefault(),t.setApplication(e._id)}}},[i("v-icon",[t._v("touch_app")])],1)],1)],1),i("v-divider",{key:a,staticClass:"mr-3"})]})],2)],1),i("v-card-actions",[t.device.application&&t.device.application._id?i("v-btn",{staticClass:"warning black--text",attrs:{flat:""},nativeOn:{click:function(e){return t.removeApplication()}}},[t._v("REMOVE APPLICATION")]):t._e(),i("v-spacer"),i("v-btn",{staticClass:"secondary",attrs:{flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n          Close\n        ")])],1)],1),i("v-confirm",{ref:"confirm"})],1)},ei=[],ii={name:"DeviceApplications",props:["dialogSignal"],data:function(){return{dialog:!1,device:{},applications:[]}},components:{"v-confirm":H},watch:{dialogSignal:function(t){this.dialog=!this.dialog}},created:function(){this.loadDevice(this.$route.params.id),this.loadApplications()},methods:{navigate:function(t,e){this.$router.push({name:t,params:{id:e}})},loadApplications:function(){var t=this,e=m.getters.baseUrl+"/api/v2/applications";this.$http.get(e).then(function(t){t.data&&t.data.applications&&(this.applications=t.data.applications)},function(e){t.notifyError(e.status,e.statusText)})},loadDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id;this.$http.get(e).then(function(t){t.data&&t.data.device&&(this.device=t.data.device)},function(e){t.notifyError(e.status,e.statusText)})},setApplication:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Change application assigned","Do you confirm?",{color:"info"});case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:i=m.getters.baseUrl+"/api/v2/application/"+e+"/device/"+this.$route.params.id,this.$http.post(i).then(function(t){t.body&&200===t.body.status?(this.loadDevice(),this.$emit("update")):this.notifyError(t.body.status,t.body.error)},function(t){a.notifyError(t.status,t.statusText)});case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),removeApplication:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete application assignement","Do you confirm?",{color:"info"});case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/application",this.$http.delete(e).then(function(t){this.loadDevice(),this.$emit("update")},function(t){i.notifyError(t.status,t.statusText)});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},ai=ii,ni=Object(_["a"])(ai,ti,ei,!1,null,null,null),si=ni.exports,oi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"640"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{staticClass:"upy-card"},[t.device.project&&t.device.project._id?i("v-card-title",[t._v("\n      device is assigned to "+t._s(t.device.project.name)+"\n    ")]):i("v-card-title",[t._v("\n      "+t._s(t.device.name)+" has no project\n    ")]),i("v-card-text",[0===t.projects.length?i("p",{staticClass:"text-xs-center"},[t._v("\n        You have no projects yet,"),i("br"),i("v-btn",{attrs:{center:""},on:{click:function(e){return t.navigate("Projects")}}},[t._v("Manage projects")])],1):t._e(),t.device.project&&t.device.project._id?i("p",{staticClass:"text-xs-center"},[i("v-btn",{attrs:{center:""},on:{click:function(e){return t.navigate("ProjectSettings",t.device.project._id)}}},[t._v("Manage project "+t._s(t.device.project.name)+"\n        ")])],1):t._e(),!(t.projects.length>0)||t.device.project&&t.device.project._id?t._e():i("v-list",{attrs:{subheader:"","two-line":""}},[i("v-subheader",[t._v("please select an project below using the button")]),t._l(t.projects,function(e,a){return[i("v-list-tile",{key:a+"ws",staticClass:"mr-3"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.name))]),i("v-list-tile-sub-title",[t._v(t._s(e.slug))])],1),i("v-list-tile-action",[i("v-btn",{staticClass:"info",on:{click:function(i){return i.preventDefault(),t.setProject(e._id)}}},[i("v-icon",[t._v("touch_app")])],1)],1)],1),i("v-divider",{key:a,staticClass:"mr-3"})]})],2)],1),i("v-card-actions",[t.device.project&&t.device.project._id?i("v-btn",{staticClass:"warning black--text",attrs:{flat:""},nativeOn:{click:function(e){return t.removeProject()}}},[t._v("Remove Projects")]):t._e(),i("v-spacer"),i("v-btn",{staticClass:"secondary",attrs:{flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n          Close\n        ")])],1)],1),i("v-confirm",{ref:"confirm"})],1)},ri=[],ci={name:"DeviceProjects",props:["dialogSignal"],data:function(){return{dialog:!1,device:{},projects:[]}},components:{"v-confirm":H},watch:{dialogSignal:function(t){this.dialog=!this.dialog}},mounted:function(){this.loadDevice(this.$route.params.id),this.loadProjects()},methods:{navigate:function(t,e){this.$router.push({name:t,params:{id:e}})},loadProjects:function(){var t=this,e=m.getters.baseUrl+"/api/v2/projects";this.$http.get(e).then(function(t){t.data&&t.data.projects&&(this.projects=t.data.projects)},function(e){t.notifyError(e.status,e.statusText)})},loadDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id;this.$http.get(e).then(function(t){t.data&&t.data.device&&(this.device=t.data.device)},function(e){t.notifyError(e.status,e.statusText)})},setProject:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Change project assigned","Do you confirm?",{color:"info"});case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:i=m.getters.baseUrl+"/api/v2/project/"+e+"/device/"+this.$route.params.id,this.$http.post(i).then(function(t){t.body&&200===t.body.status?(this.loadDevice(),this.$emit("update")):this.notifyError(t.body.status,t.body.error)},function(t){a.notifyError(t.status,t.statusText)});case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),removeProject:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete device-project assignement","Do you confirm?",{color:"info"});case 2:if(t.sent){t.next=4;break}return t.abrupt("return");case 4:e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/project",this.$http.delete(e).then(function(t){this.loadDevice(),this.$emit("update")},function(t){i.notifyError(t.status,t.statusText)});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},li=ci,ui=Object(_["a"])(li,oi,ri,!1,null,null,null),di=ui.exports,pi={name:"Device",data:function(){return{user:m.getters.user,device:{configuration:{data:{}},access_tokens:[]},update_on_boot:!1,version:0,applications:[],projects:[],mqtt:{},dialogApp:!1,dialogProject:!1,mqtt_platform_defaults:{}}},components:{"v-confirm":H,"v-dialog-name":X,"v-device-application":si,"v-device-project":di},created:function(){this.loadDevice(this.$route.params.id)},mounted:function(){var t=this;l.$emit("set-title","device settings");var e=this,i=m.getters.baseUrl+"/api/v2/applications/mqtt_platform_defaults";this.$http.get(i).then(function(t){t.data&&t.data.mqtt_platform_defaults?e.mqtt_platform_defaults=t.data.mqtt_platform_defaults:this.notifyError(500,"unable to get mqtt platform defaults")},function(e){t.notifyError(e.status,e.statusText)})},computed:{show_mqtt_settings:function(){return!1}},methods:{saveUpdateOnBoot:function(t){var e=this,i=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/configuration",a=this.device.configuration.data;this.$http.post(i,a).then(function(t){200===t.status?this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}}):this.notifyError(t.body.status,t.body.error)},function(t){console.log("error updating LTE config:",t),e.notifyError(t.status,t.body.message)})},saveDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.device._id,i=this.device;this.$http.post(e,i).then(function(t){this.$router.push({name:"Devices"})},function(e){console.log(e),console.log("error here"),t.notifyError(e.status,e.body.message)})},loadDevice:function(t){var e=this,i=m.getters.baseUrl+"/api/v2/account/device/"+t;this.$http.get(i).then(function(t){t.data&&t.data.device&&t.data.device._id?(this.device=t.data.device,l.$emit("set-title","device settings")):(this.notifyError(500,"unexpected error DeviceSettings.loadDevice"),this.$router.push({name:"Devices"}))},function(t){e.notifyError(t.status,t.statusText)})},duplicateDevice:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.dialogName.open("Duplicate device","Please select new device name",{color:"info"});case 2:i=t.sent,a=m.getters.baseUrl+"/api/v2/account/device/"+this.device._id+"/duplicate/"+i,this.$http.get(a).then(function(t){this.$router.push({name:"Devices"})},function(t){n.notifyError(t.status,t.statusText)});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),deleteDevice:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete device","Are you sure?",{color:"warning"});case 2:if(!t.sent){t.next=5;break}i=m.getters.baseUrl+"/api/v2/account/device/"+this.device._id,this.$http.delete(i).then(function(t){this.$router.push({name:"Devices"})},function(t){a.notifyError(t.status,t.statusText)});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},openDialog:function(t){"DeviceApplication"===t&&(this.dialogApp=!this.dialogApp),"DeviceProject"===t&&(this.dialogProject=!this.dialogProject)},navigate:function(t){this.$router.push({name:t,params:{id:this.device._id,configuration:this.device.configuration.data,device:this.device,version:this.version}})},saveLocation:function(){console.log("test",this)}}},vi=pi,fi=Object(_["a"])(vi,Ze,Xe,!1,null,null,null),hi=fi.exports,mi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticClass:"white"},[i("v-device-card-title",{attrs:{device:t.device,version:t.version}}),i("v-card-text",[i("json-editor",{ref:"editor",attrs:{onChange:t.onConfigChange,json:t.configuration}})],1),i("v-btn",{attrs:{absolute:"",fab:"",bottom:"",right:"",color:"primary"},nativeOn:{click:function(e){return t.saveDevice()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1)],1)},gi=[],bi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.device?i("v-card-title",[i("v-layout",[i("v-flex",{staticClass:"device",attrs:{xs12:""}},[t._v("\n   .: "+t._s(t.device.uname)+" :. "+t._s(t.device.name)),i("br"),t.version?i("p",{staticClass:"ml-4"},[t._v("configuration version "+t._s(t.version))]):t._e()])],1)],1):t._e()},_i=[],yi={name:"WifiSettingsLine",props:["device","version","subtitle"]},xi=yi,wi=Object(_["a"])(xi,bi,_i,!1,null,null,null),ki=wi.exports,Ci={name:"AdvancedDeviceSettings",components:{"json-editor":ie["a"],"v-device-card-title":ki},data:function(){return{device:{},configuration:null,output:null,mode:"tree",version:null}},created:function(){this.loadDevice(this.$route.params.id)},mounted:function(){l.$emit("set-title","Advanced device settings");var t=this.$refs.editor.editor;t.setMode(this.mode)},methods:{onConfigChange:function(t){console.log(t),this.output=Object.assign({},t)},saveDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/configuration",i=Object.assign({},this.output);this.$http.post(e,i).then(function(t){this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}})},function(e){console.log(e),console.log("error here"),t.notifyError(e.status,e.body.message)})},loadDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/configuration",i=this;this.$http.get(e).then(function(t){if(t.data.device)if(this.device=t.data.device,l.$emit("set-title",this.device.name+" advanced settings"),t.data&&t.data.configuration){this.configuration=t.data.configuration,this.output=t.data.configuration,this.version=t.data.version;var e=i.$refs.editor.editor;setTimeout(function(){e.expandAll()},1)}else this.configuration={},this.notifyError(500,"an empty configuration has been created")},function(e){t.notifyError(e.status,e.statusText)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},ji=Ci,$i=(i("6a2a"),Object(_["a"])(ji,mi,gi,!1,null,null,null)),Ei=$i.exports,Ai=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticClass:"white"},[i("v-device-card-title",{attrs:{device:t.device,version:t.version}}),i("v-card-text",[i("json-editor",{ref:"editor",attrs:{onChange:t.onConfigChange,json:t.attributes}})],1),i("v-layout",{attrs:{absolute:"",bottom:"",right:""}},[i("v-btn",{attrs:{fab:"",color:"default"},nativeOn:{click:function(e){return t.navigate("DeviceSettings")}}},[i("v-icon",[t._v("close")])],1),i("v-btn",{attrs:{fab:"",color:"primary"},nativeOn:{click:function(e){return t.saveDevice()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1)],1)],1)},Di=[],Pi={name:"DeviceAttributes",components:{"json-editor":ie["a"],"v-device-card-title":ki},data:function(){return{device:{},attributes:null,output:null,mode:"tree",version:null}},created:function(){this.loadDevice(this.$route.params.id)},mounted:function(){l.$emit("set-title","Attributes device settings");var t=this.$refs.editor.editor;t.setMode(this.mode)},methods:{onConfigChange:function(t){this.output=Object.assign({},t)},saveDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/attributes",i=Object.assign({},this.output);this.$http.post(e,i).then(function(t){this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}})},function(e){console.log(e),console.log("error here"),t.notifyError(e.status,e.body.message)})},loadDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/attributes",i=this;this.$http.get(e).then(function(t){if(t.data.device)if(this.device=t.data.device,l.$emit("set-title",this.device.name+" advanced settings"),t.data&&t.data.attributes){this.attributes=t.data.attributes,this.output=t.data.attributes,this.version=t.data.version;var e=i.$refs.editor.editor;setTimeout(function(){e.expandAll()},1)}else this.attributes={},this.notifyError(500,"an empty attributes has been created")},function(e){t.notifyError(e.status,e.statusText)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},navigate:function(t){this.$router.push({name:t,params:{id:this.device._id}})}}},Si=Pi,Ti=(i("628e"),Object(_["a"])(Si,Ai,Di,!1,null,null,null)),Oi=Ti.exports,Ii=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticClass:"white"},[i("v-card-text",[i("l-map",{staticStyle:{width:"100%",height:"500px"},attrs:{zoom:t.zoom,center:t.center,marker:t.marker},on:{click:t.addMarker}},[i("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}}),i("l-marker",{attrs:{"lat-lng":t.marker}})],1)],1)],1)],1),i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticClass:"upy-card"},[i("v-card-text",[i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-layout",{attrs:{row:"",wrap:"","pa-4":""}},[i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{hint:"country",label:"Country"},model:{value:t.device_location_country,callback:function(e){t.device_location_country=e},expression:"device_location_country"}})],1),i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{hint:"state",label:"State"},model:{value:t.device_location_state,callback:function(e){t.device_location_state=e},expression:"device_location_state"}})],1),i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{hint:"locality",label:"locality"},model:{value:t.device_location_locality,callback:function(e){t.device_location_locality=e},expression:"device_location_locality"}})],1)],1)],1)],1),i("v-layout",{attrs:{absolute:"",bottom:"",right:""}},[i("v-btn",{attrs:{fab:"",color:"default"},nativeOn:{click:function(e){return t.navigate("DeviceSettings")}}},[i("v-icon",[t._v("close")])],1),i("v-btn",{attrs:{fab:"",color:"primary"},nativeOn:{click:function(e){return t.saveDevice()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1)],1)],1)},Ui=[],Li={name:"OSMap",data:function(){return{device:{},output:null,zoom:15,center:[48.41322,-1.219482],url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',marker:[48.41322,-1.219482],device_location_country:null,device_location_state:null,device_location_locality:null,valid:!1,location_loaded:!1}},mounted:function(){l.$emit("set-title","Map device settings")},created:function(){this.loadDevice(this.$route.params.id)},components:{LMap:yt["a"],LTileLayer:xt["a"],LMarker:wt["a"]},methods:{loadDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/location";this.$http.get(e).then(function(t){t.data.device?(this.device=t.data.device,l.$emit("set-title",this.device.name+" geolocation settings"),t.data&&t.data.location?(this.location_loaded=!0,this.output=t.data.location,this.device_location_country=t.data.location.country,this.device_location_state=t.data.location.state,this.device_location_locality=t.data.location.locality,this.marker=t.data.location.marker,this.center=t.data.location.marker):(this.location={},this.notifyError(500,"an empty location has been created"),this.addDefaultMarker())):this.addDefaultMarker()},function(e){t.notifyError(e.status,e.statusText),t.addDefaultMarker()})},addDefaultMarker:function(){var t=this;console.log("marker"),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var i=t;setTimeout(function(){i.location_loaded||(i.center=[e.coords.latitude,e.coords.longitude],i.marker=[e.coords.latitude,e.coords.longitude],i.updateLocationDetails(e.coords.latitude,e.coords.longitude))},50)})},addMarker:function(t){this.marker=[t.latlng.lat,t.latlng.lng],this.updateLocationDetails(t.latlng.lat,t.latlng.lng)},updateLocationDetails:function(t,e){var i=this,a="https://nominatim.openstreetmap.org/reverse?format=json&lat="+t+"&lon="+e+"&zoom=18&addressdetails=1";this.$http.get(a).then(function(t){this.device_location_country=t.data.address.country,this.device_location_state=t.data.address.state,this.device_location_locality=t.data.address.city||t.data.address.road||t.data.address.town},function(t){i.notifyError(t.status,t.statusText)})},saveDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/location",i=Object.assign({},{country:this.device_location_country,state:this.device_location_state,locality:this.device_location_locality,marker:this.marker});this.$http.post(e,i).then(function(t){this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}})},function(e){console.log(e),console.log("error here"),t.notifyError(e.status,e.body.message)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},navigate:function(t){this.$router.push({name:t,params:{id:this.device._id}})}}},Ri=Li,qi=Object(_["a"])(Ri,Ii,Ui,!1,null,null,null),Mi=qi.exports,Wi=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:"","md-6":"","offset-md-2":""}},[i("v-card",{staticClass:"upy-card"},[i("v-card-title",[t._v("\n            "+t._s(t.device.name)+" credentials\n          ")]),i("v-card-text",[i("v-list",{attrs:{subheader:"","two-line":""}},[t._l(t.credentials,function(e,a){return[i("v-divider",{key:a,staticClass:"mr-3"}),i("v-list-tile",{key:a+"ws",staticClass:"mr-3"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.access_token))]),i("v-list-tile-sub-title",[t._v(t._s(e._id))])],1),i("v-list-tile-action",[i("v-btn",{nativeOn:{click:function(i){return t.deleteToken(e._id)}}},[i("v-icon",{staticClass:"warning--text"},[t._v("delete")])],1)],1)],1)]})],2)],1),i("v-card-actions",[i("v-btn",{staticClass:"primary black--text",attrs:{flat:"",primary:""},nativeOn:{click:function(e){return t.createToken()}}},[t._v("Create token")])],1),i("v-btn",{attrs:{absolute:"",fab:"",bottom:"",right:"",color:"primary"},nativeOn:{click:function(e){return t.close()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1),i("v-confirm",{ref:"confirm"})],1)},zi=[],Ni={name:"DeviceCredentials",data:function(){return{device:{},credentials:[]}},components:{"v-confirm":H},created:function(){this.loadCredentials(this.$route.params.id)},mounted:function(){l.$emit("set-title","device credentials")},methods:{close:function(){this.$router.push({name:"DeviceSettings",params:{id:this.device._id}})},createToken:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/credentials",i={};this.$http.put(e,i).then(function(t){this.loadCredentials(this.$route.params.id)},function(e){t.notifyError(e.status,e.body.message)})},loadCredentials:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/credentials";this.$http.get(e).then(function(t){t.data&&t.data.credentials&&t.data.device&&(this.device=t.data.device,this.credentials=t.data.credentials,l.$emit("set-title",this.device.name+" credentials"))},function(e){t.notifyError(e.status,e.statusText)})},deleteToken:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete this access token","Are you sure?",{color:"warning"});case 2:if(!t.sent){t.next=6;break}i=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/credential/"+e,a={},this.$http.delete(i,a).then(function(t){this.loadCredentials(this.$route.params.id)},function(t){n.notifyError(t.status,t.body.message)});case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},Bi=Ni,Fi=Object(_["a"])(Bi,Wi,zi,!1,null,null,null),Vi=Fi.exports,Ki=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[t.device?i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticClass:"upy-card"},[i("v-device-card-title",{attrs:{device:t.device,version:t.version}}),i("v-card-text",[i("v-layout",[i("v-flex",{attrs:{md2:""}},[i("v-switch",{attrs:{label:"Wifi on boot"},model:{value:t.wifi_on_boot,callback:function(e){t.wifi_on_boot=e},expression:"wifi_on_boot"}})],1),i("v-flex",{attrs:{md2:""}},[i("v-switch",{attrs:{label:"Set time with Internet"},model:{value:t.ntp_sync,callback:function(e){t.ntp_sync=e},expression:"ntp_sync"}})],1),i("v-flex",{attrs:{md2:""}},[i("v-switch",{attrs:{label:"External antenna"},model:{value:t.external_antenna,callback:function(e){t.external_antenna=e},expression:"external_antenna"}})],1)],1),i("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.wifis,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[i("v-wifi-line",{attrs:{index:e.index,data:e.item},on:{delete:t.deleteNetwork,change:t.updateNetworks}})]}}],null,!1,2801458211)})],1),i("v-card-actions",[i("v-btn",{attrs:{color:"primary",raised:""},on:{click:function(e){return e.stopPropagation(),t.addWifi()}}},[t._v("Add Wifi Credential")])],1),i("v-btn",{attrs:{absolute:"",fab:"",bottom:"",right:"",color:"primary"},nativeOn:{click:function(e){return t.saveWifis()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1):t._e()],1)},Hi=[],Yi=i("db3b"),Gi=i.n(Yi),Ji=i("724a"),Qi=i.n(Ji),Zi={extends:Gi.a,data:function(){return{customAppendIcon:"visibility_off",customType:"password"}},methods:{genInput:function(){var t=Gi.a.methods.genInput.call(this);return t[0].data.attrs.type=this.customAppendIcon.includes("_off")?"password":"text",t},genIcon:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=Qi.a.methods.genIcon.call(this,t,e);return"append"===t&&(i.children[0].text=this.customAppendIcon),i}},render:function(){var t=this;return Gi.a.methods.genInput(this.genInput(),{attrs:{tabindex:!1}},function(){t.customAppendIcon.includes("_off")?t.customAppendIcon="visibility":t.customAppendIcon="visibility_off"})}},Xi=Zi,ta=Object(_["a"])(Xi,Ke,He,!1,null,null,null),ea=ta.exports,ia=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[i("v-select",{attrs:{label:"Please select",items:t.auth_types},on:{change:t.authSelected},model:{value:t.wifi.auth_type,callback:function(e){t.$set(t.wifi,"auth_type",e)},expression:"wifi.auth_type"}})],1),i("td",[i("v-text-field",{on:{change:t.wifiChanged},model:{value:t.wifi.bssid,callback:function(e){t.$set(t.wifi,"bssid",e)},expression:"wifi.bssid"}})],1),i("td",["WPA2-EAP-PEAP"===t.wifi.auth_type?i("v-text-field",{attrs:{label:"username"},on:{change:t.wifiChanged},model:{value:t.wifi.username,callback:function(e){t.$set(t.wifi,"username",e)},expression:"wifi.username"}}):t._e()],1),i("td",["WPA2-EAP-TLS"!==t.wifi.auth_type?i("v-text-field",{attrs:{label:"password",autocomplete:"off",type:"password"},on:{change:t.wifiChanged},model:{value:t.wifi.password,callback:function(e){t.$set(t.wifi,"password",e)},expression:"wifi.password"}}):t._e()],1),i("td",["WPA2"!==t.wifi.auth_type?i("v-text-field",{attrs:{label:"identity"},on:{change:t.wifiChanged},model:{value:t.wifi.identity,callback:function(e){t.$set(t.wifi,"identity",e)},expression:"wifi.identity"}}):t._e()],1),i("td",["WPA2-EAP-TLS"===t.wifi.auth_type?i("v-text-field",{attrs:{label:"client key"},on:{change:t.wifiChanged},model:{value:t.wifi.client_key,callback:function(e){t.$set(t.wifi,"client_key",e)},expression:"wifi.client_key"}}):t._e()],1),i("td",["WPA2-EAP-TLS"===t.wifi.auth_type?i("v-text-field",{attrs:{label:"client certificate"},on:{change:t.wifiChanged},model:{value:t.wifi.client_cert,callback:function(e){t.$set(t.wifi,"client_cert",e)},expression:"wifi.client_cert"}}):t._e()],1),i("td",["WPA2"!==t.wifi.auth_type?i("v-text-field",{attrs:{label:"certificate authorities"},on:{change:t.wifiChanged},model:{value:t.wifi.cert_auths,callback:function(e){t.$set(t.wifi,"cert_auths",e)},expression:"wifi.cert_auths"}}):t._e()],1),i("td",{staticClass:"text-xs-right",attrs:{width:"80"}},[i("v-btn",{attrs:{large:"",icon:"",color:"warning"},on:{click:function(e){return e.stopPropagation(),t.deleteWifi()}}},[i("v-icon",[t._v("delete")])],1)],1),i("v-confirm",{ref:"confirm"})],1)},aa=[],na={name:"WifiSettingsLine",props:["data","index"],data:function(){return{wifi:{},external_antenna:!1,auth_types:["WPA2","WPA2-EAP-TLS","WPA2-EAP-PEAP"]}},components:{"v-confirm":H},mounted:function(){this.wifi=Object.assign({},this.data)},methods:{deleteWifi:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete wifi network","Are you sure?",{color:"warning"});case 2:if(!t.sent){t.next=4;break}this.$emit("delete",this.index,this.wifi);case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),wifiChanged:function(){this.wifi&&this.wifi.bssid&&this.wifi.bssid.length>0&&this.$emit("change",this.index,Object.assign({},this.wifi))},authSelected:function(t){"WPA2"===t&&(delete this.wifi["cert_auths"],delete this.wifi["client_key"],delete this.wifi["client_cert"]),"WPA2-EAP-TLS"===t&&(this.wifi["cert_auths"]||(this.wifi["cert_auths"]="/flash/cert/wifi_cert_auths.pem"),this.wifi["client_key"]||(this.wifi["client_key"]="/flash/cert/wifi_client_key.pem"),this.wifi["client_cert"]||(this.wifi["client_cert"]="/flash/cert/wifi_client_cert.pem")),"WPA2-PEAP"===t&&(this.wifi["cert_auths"]||(this.wifi["cert_auths"]="/flash/cert/wifi_cert_auths.pem")),this.wifiChanged()},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},sa=na,oa=Object(_["a"])(sa,ia,aa,!1,null,null,null),ra=oa.exports,ca={name:"WifiSettings",props:["configuration","device","version"],data:function(){return{headers:[{text:"authentication",value:"authentication",sortable:!1},{text:"bssid",value:"bssid",sortable:!1},{text:"",value:"password",sortable:!1},{text:"",value:"cert_auths",sortable:!1},{text:"",value:"client_cert",sortable:!1},{text:"",value:"client_key",sortable:!1},{text:"",value:"",sortable:!1},{text:"",value:"",sortable:!1},{text:"",value:"",sortable:!1}],external_antenna:!1,wifi_on_boot:!1,ntp_sync:!1,wifis:[]}},components:{"v-password-field":ea,"v-wifi-line":ra,"v-device-card-title":ki},mounted:function(){l.$emit("set-title","Device wifi settings"),this.configuration&&this.configuration.wifi?(this.wifis=this.configuration.wifi.networks||[],this.wifi_on_boot=this.configuration.wifi.wifi_on_boot,this.ntp_sync=this.configuration.wifi.ntp_sync):l.$emit(d.a.loadingEnd)},methods:{updateNetworks:function(t,e){this.wifis[t]=e,console.log("received update",e)},deleteNetwork:function(t,e){console.log("delete",t),this.wifis.splice(t,1)},addWifi:function(){this.wifis.push({auth_type:"WPA2",bssid:"",password:""})},deleteWifi:function(t){this.wifis=this.wifis.filter(function(e){return e.bssid!==t})},saveWifis:function(){var t=this,e=this.wifis.filter(function(t){return""!==t.bssid});e.forEach(function(t){delete t.show});var i={networks:e,wifi_on_boot:this.wifi_on_boot,external_antenna:this.external_antenna,ntp_sync:this.ntp_sync},a=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/configuration";this.$http.post(a,{wifi:i}).then(function(t){200===t.status?this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}}):this.notifyError(t.body.status,t.body.error)},function(e){console.log("error updating wifis:",e),t.notifyError(e.status,e.body.message)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},la=ca,ua=Object(_["a"])(la,Ki,Hi,!1,null,null,null),da=ua.exports,pa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[t.device?i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:"","offset-md2":"",md8:""}},[i("v-card",{staticClass:"upy-card"},[i("v-device-card-title",{attrs:{device:t.device,version:t.version}}),i("v-card-text",[i("v-layout",{attrs:{row:"",wrap:"","pa-4":""}},[i("v-flex",{attrs:{md2:""}},[i("v-switch",{attrs:{label:"LTE on boot"},model:{value:t.lte_on_boot,callback:function(e){t.lte_on_boot=e},expression:"lte_on_boot"}})],1),i("v-flex",{attrs:{md10:""}},[i("v-spacer")],1),i("v-flex",{attrs:{md12:"","pa-4":""}},[i("v-text-field",{attrs:{label:"APN"},model:{value:t.apn,callback:function(e){t.apn=e},expression:"apn"}})],1),i("v-flex",{attrs:{md3:"","pa-4":""}},[i("v-text-field",{attrs:{label:"band",type:"number"},model:{value:t.band,callback:function(e){t.band=e},expression:"band"}})],1),i("v-flex",{attrs:{md3:"","pa-4":""}},[i("v-text-field",{attrs:{label:"connection id",type:"number"},model:{value:t.connection_id,callback:function(e){t.connection_id=e},expression:"connection_id"}})],1),i("v-flex",{attrs:{md6:"","pa-4":""}},[i("v-text-field",{attrs:{label:"carrier"},model:{value:t.carrier,callback:function(e){t.carrier=e},expression:"carrier"}})],1)],1)],1),i("v-btn",{attrs:{absolute:"",fab:"",bottom:"",right:"",color:"primary"},nativeOn:{click:function(e){return t.saveLTE()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1):t._e()],1)},va=[],fa={name:"DeviceLTESettings",props:["configuration","device","version"],data:function(){return{carrier:null,band:null,apn:null,lte_on_boot:!1,connection_id:null}},components:{"v-device-card-title":ki},mounted:function(){if(l.$emit("set-title","Device LTE settings"),this.configuration){var t=this.configuration.lte||{};this.carrier=t.carrier,this.band=t.band,this.apn=t.apn,this.connection_id=t.connection_id,this.lte_on_boot=t.lte_on_boot}else l.$emit(d.a.loadingEnd),this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}})},methods:{saveLTE:function(){var t=this,e={carrier:this.carrier,band:this.band,apn:this.apn,lte_on_boot:this.lte_on_boot,connection_id:this.connection_id},i=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/configuration";this.$http.post(i,{lte:e}).then(function(t){200===t.status?this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}}):this.notifyError(t.body.status,t.body.error)},function(e){console.log("error updating LTE config:",e),t.notifyError(e.status,e.body.message)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},ha=fa,ma=Object(_["a"])(ha,pa,va,!1,null,null,null),ga=ma.exports,ba=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[t.device?i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:"","offset-md2":"",md8:""}},[i("v-card",{staticClass:"upy-card"},[i("v-device-card-title",{attrs:{device:t.device,version:t.version}}),i("v-card-text",[i("v-layout",{attrs:{row:"",wrap:"","pa-4":""}},[i("v-flex",{attrs:{md4:"","pt-4":""}},[i("v-switch",{attrs:{label:"BLE update application on boot"},model:{value:t.ble_app_on_boot,callback:function(e){t.ble_app_on_boot=e},expression:"ble_app_on_boot"}})],1),i("v-flex",{attrs:{md6:"","pa-4":""}},[i("v-text-field",{attrs:{type:"number",label:"Pincode"},model:{value:t.pincode,callback:function(e){t.pincode=e},expression:"pincode"}})],1),i("v-flex",{attrs:{md2:"","pa-4":""}},[i("v-text-field",{attrs:{type:"number",label:"await time"},model:{value:t.await_time,callback:function(e){t.await_time=e},expression:"await_time"}})],1)],1)],1),i("v-btn",{attrs:{absolute:"",fab:"",bottom:"",right:"",color:"primary"},nativeOn:{click:function(e){return t.saveBLE()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1):t._e()],1)},_a=[],ya={name:"DeviceBLESettings",props:["configuration","device","version"],data:function(){return{pincode:null,await_time:60,ble_app_on_boot:!0}},components:{"v-device-card-title":ki},mounted:function(){if(l.$emit("set-title","Device BLE settings"),this.configuration){var t=this.configuration.ble||{};this.pincode=t.pincode,this.await_time=t.await_time||60,this.ble_app_on_boot=this.ble_app_on_boot||!0}else l.$emit(d.a.loadingEnd),this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}})},methods:{saveBLE:function(){var t=this,e={pincode:this.pincode,await_time:this.await_time,ble_app_on_boot:this.ble_app_on_boot},i=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/configuration";this.$http.post(i,{ble:e}).then(function(t){200===t.status?this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}}):this.notifyError(t.body.status,t.body.error)},function(e){console.log("error updating LTE config:",e),t.notifyError(e.status,e.body.message)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},xa=ya,wa=Object(_["a"])(xa,ba,_a,!1,null,null,null),ka=wa.exports,Ca=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[t.device?i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:"","offset-md2":"",md8:""}},[i("v-card",{staticClass:"upy-card"},[i("v-device-card-title",{attrs:{device:t.device,version:t.version}}),i("v-card-text",[i("v-layout",{attrs:{row:"",wrap:"","pa-4":""}},[i("v-flex",{attrs:{md4:""}},[i("v-checkbox",{attrs:{label:"Activation by personalization (ABP)"},model:{value:t.abp,callback:function(e){t.abp=e},expression:"abp"}})],1),i("v-flex",{attrs:{md4:""}},[i("v-checkbox",{attrs:{label:"Activation over the air (OTAA)"},model:{value:t.otaa,callback:function(e){t.otaa=e},expression:"otaa"}})],1),i("v-flex",{attrs:{md4:""}},[i("v-checkbox",{attrs:{label:"Make nano-gateway config"},model:{value:t.nano,callback:function(e){t.nano=e},expression:"nano"}})],1),i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-select",{attrs:{items:t.regions,label:"region"},model:{value:t.region,callback:function(e){t.region=e},expression:"region"}})],1),t.otaa?i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-select",{attrs:{items:t.data_rates,label:"data rate"},model:{value:t.data_rate,callback:function(e){t.data_rate=e},expression:"data_rate"}})],1):t._e()],1),i("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[t.otaa?i("v-layout",{attrs:{row:"",wrap:"","pa-4":""}},[i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{maxlength:"16",hint:"Hex",label:"Device EUI OTAA",rules:t.devEuiRules},model:{value:t.otaa_dev_eui,callback:function(e){t.otaa_dev_eui=e},expression:"otaa_dev_eui"}})],1),i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{maxlength:"32",hint:"Hex",label:"Network key OTAA",rules:t.nwkKeyRules},model:{value:t.otaa_nwk_key,callback:function(e){t.otaa_nwk_key=e},expression:"otaa_nwk_key"}})],1)],1):t._e(),t.abp?i("v-layout",{attrs:{row:"",wrap:"","pa-4":""}},[i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{maxlength:"16",hint:"Hex",label:"Device EUI ABP",rules:t.devEuiRules},model:{value:t.abp_dev_eui,callback:function(e){t.abp_dev_eui=e},expression:"abp_dev_eui"}})],1),i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{maxlength:"32",hint:"Hex",label:"Network key ABP",rules:t.nwkKeyRules},model:{value:t.abp_nwk_key,callback:function(e){t.abp_nwk_key=e},expression:"abp_nwk_key"}})],1)],1):t._e(),t.nano?i("v-layout",{attrs:{row:"",wrap:"","pa-4":""}},[i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{hint:"IP Address",label:"server IP"},model:{value:t.server,callback:function(e){t.server=e},expression:"server"}})],1),i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{hint:"Port Number",label:"Port Number"},model:{value:t.port,callback:function(e){t.port=e},expression:"port"}})],1),i("v-flex",{attrs:{md4:"",xs12:""}},[i("v-text-field",{attrs:{hint:"Gateway ID",label:"Gateway ID",rules:t.gatewayRules},model:{value:t.gateway_id,callback:function(e){t.gateway_id=e},expression:"gateway_id"}})],1)],1):t._e()],1)],1),i("v-layout",{attrs:{absolute:"",bottom:"",right:""}},[i("v-btn",{attrs:{fab:"",color:"default"},nativeOn:{click:function(e){return t.navigate("DeviceSettings")}}},[i("v-icon",[t._v("close")])],1),i("v-btn",{attrs:{fab:"",color:"primary"},nativeOn:{click:function(e){return t.save()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1)],1):t._e()],1)},ja=[],$a=(i("4917"),{name:"DeviceLoRaSettings",props:["configuration","device","version"],data:function(){return{regions:["AS923","AU915","EU868","US915"],data_rates:[1,2,3,4,5],region:null,data_rate:null,channel:null,band:null,abp:!1,otaa:!0,nano:!1,valid:!1,abp_dev_eui:null,abp_nwk_key:null,otaa_dev_eui:null,otaa_nwk_key:null,server:null,port:null,gateway_id:null,re1:/[0-9A-Fa-f]{6}/g,nwkKeyRules:[function(t){return!!t||"Network key is required"},function(t){return t&&null!==t.match(/[0-9A-Fa-f]{32}/g)||"Network key must be valid"}],devEuiRules:[function(t){return!!t||"Dev EUI is required"},function(t){return t&&null!==t.match(/[0-9A-Fa-f]{16}/g)||"Dev EUI must be valid"}],gatewayRules:[function(t){return t&&null!==t.match(/^[aA-fF0-9]{16}$/g)||"Gateway ID must be valid"}]}},components:{"v-device-card-title":ki},mounted:function(){if(l.$emit("set-title","Device LoRa settings"),this.configuration){var t=this.configuration.lora||{};this.region=t.region,this.data_rate=t.data_rate,this.otaa=t.otaa,this.abp=t.abp,t.otaa&&(this.otaa_dev_eui=t.otaa.dev_eui,this.otaa_nwk_key=t.otaa.nwk_key),t.abp&&(this.abp_dev_eui=t.abp.dev_eui,this.abp_nwk_key=t.abp.nwk_key),t.gateway&&(this.server=t.gateway.server,this.port=t.gateway.port,this.gateway_id=t.gateway.gateway_id,this.nano=!0,this.abp=!1,this.otaa=!1)}else l.$emit(d.a.loadingEnd),this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}})},watch:{nano:function(t){t&&(this.abp=!1,this.otaa=!1)},abp:function(t){t&&(this.nano=!1)},otaa:function(t){t&&(this.nano=!1)}},methods:{save:function(){var t=this,e={region:this.region,data_rate:this.data_rate};this.otaa&&(e.otaa={dev_eui:this.otaa_dev_eui,nwk_key:this.otaa_nwk_key}),this.abp&&(e.abp={dev_eui:this.abp_dev_eui,nwk_key:this.abp_nwk_key}),this.nano&&(delete e.data_rate,e.gateway={server:this.server,port:this.port,gateway_id:this.gateway_id});var i=m.getters.baseUrl+"/api/v2/account/device/"+this.$route.params.id+"/configuration";this.$http.post(i,{lora:e}).then(function(t){200===t.status?this.$router.push({name:"DeviceSettings",params:{id:this.$route.params.id}}):this.notifyError(t.body.status,t.body.error)},function(e){console.log("error updating lora config:",e),t.notifyError(e.status,e.body.message)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},navigate:function(t){this.$router.push({name:t,params:{id:this.device._id}})}}}),Ea=$a,Aa=Object(_["a"])(Ea,Ca,ja,!1,null,null,null),Da=Aa.exports,Pa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{row:"",fluid:"","fill-height":""}},[i("v-layout",{staticClass:"fill-height",attrs:{row:"",fluid:""}},[i("v-flex",[i("v-stepper",{staticStyle:{width:"100%"},attrs:{vertical:""},model:{value:t.stepValue,callback:function(e){t.stepValue=e},expression:"stepValue"}},[i("v-stepper-step",{attrs:{complete:t.stepValue>1,step:"1"}},[t._v("\n            Wake up device\n          ")]),i("v-stepper-content",{attrs:{step:"1"}},[i("v-card",{staticClass:"upy-card elevation-0"},[i("v-card-text",[i("v-list",{attrs:{"two-line":""}},[i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-avatar",[i("v-icon",[t._v("fingerprint")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Touch device")]),i("v-list-tile-sub-title",[t._v("Keep your finger on the touch sensor")])],1)],1),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-avatar",[i("v-icon",[t._v("screen_rotation")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("Wake-up device")]),i("v-list-tile-sub-title",[t._v("Shake smoothly the device for it\n                      to detect movement and wake-up from sleep")])],1)],1)],1),i("p",[t._v("\n              Next you will be prompted for device Bluetooth connection\n              Then when it's done, select "),i("i",[t._v("Next")])])],1),i("v-card-actions",[i("v-btn",{staticClass:"primary",on:{click:function(e){t.stepValue=2}}},[t._v("next")])],1)],1)],1),i("v-stepper-step",{attrs:{complete:t.stepValue>2,step:"2"}},[t._v("Provision device")]),i("v-stepper-content",{attrs:{step:"2"}},[i("v-card",{staticClass:"upy-card elevation-0",attrs:{height:"200px"}},[i("v-card-text",[i("p",[t._v("\n                  Please click bluetooth button to start pairing.\n                ")]),i("v-ble",{on:{"ble-off":function(e){t.bleOn=!1}}})],1),i("v-card-actions",[i("v-btn",{on:{click:function(e){t.stepValue=1}}},[t._v("previous")])],1)],1)],1)],1)],1)],1)],1)},Sa=[],Ta=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-toolbar",{attrs:{card:"",prominent:""}},[i("v-toolbar-title",{staticClass:"body-2 grey--text"},[t._v("Bluetooth provision")]),i("v-spacer"),t.progress>0&&t.progress<100?i("v-progress-linear",{attrs:{color:"red"},model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}}):t._e(),t.loggedIn?i("v-btn",{attrs:{color:"info black--text",raised:""},on:{click:function(e){return e.stopPropagation(),t.ensureConfig()}}},[i("v-icon",{attrs:{left:""}},[t._v("settings")]),t._v("\n    Ensure config\n  ")],1):t._e(),t.loggedIn?i("v-btn",{attrs:{color:"info black--text",raised:""},on:{click:function(e){return e.stopPropagation(),t.openDumpFile()}}},[i("v-icon",{attrs:{left:""}},[t._v("save_alt")]),t._v("\n    Dump file\n  ")],1):t._e(),t.connected?t._e():i("v-btn",{attrs:{color:"blue black--text"},on:{click:t.connect}},[i("v-icon",{attrs:{left:""}},[t._v("bluetooth_searching")]),t._v("\n    pair\n  ")],1),t.connected?i("v-btn",{attrs:{color:"warning black--text"},on:{click:t.disconnect}},[i("v-icon",{attrs:{left:""}},[t._v("bluetooth_searching")]),t._v("\n    disconnect\n  ")],1):t._e(),i("v-ble-pin-code",{attrs:{show:t.showPinCodeDialog},on:{disconnect:t.disconnect,onLogin:t.postLogin}}),i("v-set-ble-pin-code",{attrs:{show:t.showRegisterDialog},on:{registerPin:t.onRegisterPin,"update:show":function(e){t.showRegisterDialog=e}}}),i("v-ble-dump-file",{attrs:{progress:t.progress,session:t.session,show:t.showBLEDumpFile},on:{onClose:function(e){t.message=null,t.showBLEDumpFile=!1,t.progress=-1},onChunk:t.onChunk,"update:show":function(e){t.showBLEDumpFile=e}}}),i("v-select-ble-tpl",{ref:"selectBleTpl"})],1)},Oa=[],Ia=(i("a481"),i("f559"),i("34ef"),i("bc3a")),Ua=i.n(Ia),La=i("69a0"),Ra=i.n(La),qa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"320"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("v-card",{staticClass:"upy-card"},[i("v-card-title",[i("h2",[t._v("Set a pincode")])]),i("v-card-text",[i("p",[t._v("Protect access to this device")]),i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs9:""}},[i("v-text-field",{attrs:{type:"password",rules:t.ruleReq,label:"Pincode",required:""},model:{value:t.pinCode,callback:function(e){t.pinCode=e},expression:"pinCode"}})],1),i("v-flex",{attrs:{xs9:""}},[i("v-text-field",{attrs:{type:"password",rules:t.ruleMatch,label:"Pincode (again)",required:""},model:{value:t.pinCode2,callback:function(e){t.pinCode2=e},expression:"pinCode2"}})],1)],1)],1),i("v-card-actions",[i("v-btn",{attrs:{"disabled:":"!valid",color:"primary",raised:""},on:{click:function(e){return e.stopPropagation(),t.toggle()}}},[t._v("Done")])],1)],1)],1)},Ma=[],Wa={name:"BLESetPincode",props:["show"],data:function(){var t=this;return{pinCode:"",pinCode2:"",ruleMatch:[function(e){return e===t.pinCode||"Pincodes must match"}],ruleReq:[function(t){return!!t||"Pincode is required"}]}},computed:{valid:function(){return this.pinCode.length>0}},methods:{toggle:function(){this.valid&&this.$emit("registerPin",this.pinCode)}}},za=Wa,Na=Object(_["a"])(za,qa,Ma,!1,null,null,null),Ba=Na.exports,Fa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{width:"320"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("v-card",{staticClass:"upy-card"},[i("v-card-title",[i("h2",[t._v("Bluetooth login")])]),i("v-card-text",[i("p",[t._v("Please enter your pincode to access device")]),i("v-layout",{attrs:{wrap:""}},[i("v-flex",{attrs:{xs9:""}},[t.show?i("v-text-field",{attrs:{placeholder:"1234",rules:t.ruleReq,label:"Pincode",required:"",autofocus:""},model:{value:t.pinCode,callback:function(e){t.pinCode=e},expression:"pinCode"}}):t._e()],1)],1)],1),i("v-card-actions",[i("v-btn",{attrs:{color:"danger black--text",raised:""},on:{click:function(e){return e.stopPropagation(),t.$emit("disconnect")}}},[t._v("Disconnect")]),i("v-btn",{attrs:{"disabled:":"pinCode",color:"primary black--text",raised:""},on:{click:function(e){return e.stopPropagation(),t.toggle()}}},[t._v("Login")])],1)],1)],1)},Va=[],Ka={name:"BLEPincode",props:["show"],data:function(){return{pinCode:"",pinCode2:"",ruleReq:[function(t){return!!t||"Pincode is required"}]}},computed:{valid:function(){return this.pinCode.length>0}},methods:{toggle:function(){this.$emit("onLogin",this.pinCode)}}},Ha=Ka,Ya=Object(_["a"])(Ha,Fa,Va,!1,null,null,null),Ga=Ya.exports,Ja=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"480"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[i("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-card",{staticClass:"upy-card"},[i("v-card-title",[i("h2",[t._v("Dump file to flash")])]),i("v-card-text",[i("v-layout",{attrs:{wrap:""}},[t.file?i("v-flex",{attrs:{xs12:""}},[0==t.progress?i("v-text-field",{attrs:{rules:t.ruleReq,hint:"ex: /flash/file.py",label:"path",required:""},model:{value:t.path,callback:function(e){t.path=e},expression:"path"}}):t._e(),t.progress>0?i("span",[t._v("path: "+t._s(t.path)),i("br")]):t._e(),t._v("\n             md5: "+t._s(t.md5)),i("br"),t._v("\n             size: "+t._s(t.humanFileSize(t.file.size))),i("br")],1):t._e(),0===t.progress?i("v-flex",{attrs:{xs12:"","text-xs-center":""}},[null===t.file?i("upload-btn",{attrs:{"text-xs-center":"",color:"warning",fileChangedCallback:t.fileChanged}},[i("template",{slot:"icon"},[i("v-icon",[t._v("file_upload")])],1)],2):t._e()],1):t._e(),t.progress>0?i("v-flex",{attrs:{xs12:"","text-xs-center":"","mb-4":"","mt-2":""}},[i("h1",[t._v(t._s(t.progress)+" % ")]),i("v-progress-linear",{model:{value:t.progress,callback:function(e){t.progress=e},expression:"progress"}}),i("p",{staticClass:"mt-2"},[t._v(t._s(t.etaString))])],1):t._e()],1)],1),i("v-card-actions",[i("v-btn",{attrs:{color:"danger black--text",raised:""},on:{click:function(e){return e.stopPropagation(),t.cancel()}}},[t._v("Cancel")]),0===t.progress?i("v-btn",{attrs:{color:"info black--text",raised:""},on:{click:function(e){return e.stopPropagation(),t.dump()}}},[t._v("Dump")]):t._e()],1)],1)],1)],1)},Qa=[],Za={name:"BLEDumpFile",props:["show","session","progress"],data:function(){return{start:(new Date).getTime(),valid:!1,path:"",etaString:"",file:null,ready:!1,md5:null,ruleReq:[function(t){return!!t||"field is required"}]}},components:{"upload-btn":zt.a},watch:{progress:function(t){this.eta()}},methods:{eta:function(){1===this.progress&&(this.start=(new Date).getTime());var t=(new Date).getTime(),e=t-this.start,i=Math.ceil(100*e/this.progress),a=Math.ceil((t-this.start-i)/-1e3),n=Math.floor(a/60),s=a-60*n;0!==a&&(this.etaString=0===n?"".concat(a," secondsd remaining"):"".concat(n," minutes ").concat(s," seconds remaining"))},humanFileSize:function(t){var e=Math.floor(Math.log(t)/Math.log(1024));return 1*(t/Math.pow(1024,e)).toFixed(2)+" "+["B","kB","MB","GB","TB"][e]},fileChanged:function(t){var e=this;this.file=t,this.path="/flash/"+t.name;var i=new FileReader;i.onloadend=function(t){e.data=btoa(t.target.result);var i=new Ra.a;i.appendBinary(t.target.result),e.md5=i.end()},i.readAsBinaryString(t)},dump:function(){var t="POST file\nmd5:".concat(this.md5,"\npath:").concat(this.path,"\naccess_token:").concat(this.session,"\n\n").concat(this.data);this.$emit("onChunk",t)},cancel:function(){this.file=null,this.data=0,this.$emit("onClose")}}},Xa=Za,tn=Object(_["a"])(Xa,Ja,Qa,!1,null,null,null),en=tn.exports,an=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-dialog",{attrs:{"max-width":"640"},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"])?null:t.cancel(e)}},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[i("v-card",{staticClass:"upy-card"},[i("v-toolbar",{attrs:{color:t.options.color,dense:"",flat:""}},[i("v-toolbar-title",{staticClass:"primary--text"},[t._v("Bluetooth on-boarding")])],1),i("v-card-text",[t._v("\n      You can create a new device or use a template to prepare a device.\n      "),i("v-select",{attrs:{label:"select template",disabled:0===this.templates.length}}),t._v("\n      On the next step you will be redirected to device configuration screen.\n      When you configuration is ready, use the Bluetooth "),i("b",[t._v("Ensure Config")]),t._v(" tool for\n      for saving settings inside the device\n    ")],1),i("v-card-actions",{staticClass:"pt-0"},[i("v-btn",{nativeOn:{click:function(e){return t.cancel(e)}}},[t._v("Cancel")]),i("v-btn",{attrs:{primary:"",disabled:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("Copy from template")]),i("v-btn",{attrs:{primary:""},nativeOn:{click:function(e){return t.save(e)}}},[t._v("Create new device")])],1)],1)],1)},nn=[],sn={data:function(){return{templates:[],dialog:!1,resolve:null,reject:null,message:null,title:null,device:{_id:-1},options:{color:"primary",width:290}}},methods:{open:function(t,e,i){var a=this;return this.dialog=!0,this.title=t,this.message=e,this.name="",this.options=Object.assign(this.options,i),new Promise(function(t,e){a.resolve=t,a.reject=e})},save:function(){this.resolve(this.device),this.dialog=!1},cancel:function(){this.resolve(!1),this.dialog=!1}}},on=sn,rn=Object(_["a"])(on,an,nn,!1,null,null,null),cn=rn.exports,ln=i("34eb")("youspot-webapp:ble"),un={name:"BLE",components:{"v-set-ble-pin-code":Ba,"v-ble-pin-code":Ga,"v-ble-dump-file":en,"v-select-ble-tpl":cn},data:function(){return{device:{},id:null,access_token:null,connected:!1,bt_connection_error:!1,loggedIn:!1,writer:null,reader:null,read_buffer:new Uint8Array,message:null,showRegisterDialog:!1,showPinCodeDialog:!1,showBLEDumpFile:!1,session:null,progress:0,action:""}},methods:{notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},ensureConfig:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){var e,i,a,n,s,o,r,c,l,u=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getV1AccessToken();case 2:if(e=t.sent,e.credentials){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,this.getV1Configuration(e.credentials[0].access_token);case 7:i=t.sent,a=JSON.stringify(i),n=btoa(a),s=new Ra.a,s.appendBinary(a),o=s.end(),r="/flash/config.json",this.action="sending ".concat(r," ..."),c="POST file\nmd5:".concat(o,"\npath:").concat(r,"\naccess_token:").concat(this.session,"\n\n").concat(n),l=this,this.send(c,function(t){l.action=""}).catch(function(t){console.log("error in sending file ..."),console.log(t),u.notifyError(500,t)});case 18:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getV1Configuration:function(t){return this.action="resolve device configuration",new Promise(function(e,i){var a=m.getters.baseUrl+"/api/v1/devices/me/configuration";Ua.a.get(a,{headers:{Authorization:"Bearer "+t}}).then(function(t){var i=t.data.configuration;ln("/api/v1/devices/me/configuration returned:",i),e(i)},function(t){i(t)})})},getV1AccessToken:function(){var t=this;return this.action="resolve Authorization",new Promise(function(e,i){var a=m.getters.baseUrl+"/api/v2/account/device/".concat(t.device._id,"/credentials");t.$http.get(a).then(function(t){e(t.body)},function(t){i(t)})})},onChunk:function(t){var e=this,i=this,a=function(t){i.showBLEDumpFile=!1,i.action=""};this.action="sending data",this.send(t,a).catch(function(t){console.log("error in sending file ..."),console.log(t),e.notifyError(500,t)})},openDumpFile:function(){this.progress=0,this.showBLEDumpFile=1},disconnect:function(){this.peripheral&&this.peripheral.gatt&&(this.peripheral.gatt.disconnect(),this.peripheral=null)},onDisconnected:function(){this.connected=!1,this.loggedIn=!1,this.session=null,this.uname=null,this.unique_id=null,this.$emit("ble-off")},onConnected:function(){this.connected=!0,this.showPinCodeDialog=!0},onRegisterPin:function(t){this.showRegisterDialog=!1,this.showPinCodeDialog=!1},onLoginResponse:function(t){var e=t.split("\n"),i={};try{i=JSON.parse(e[e.length-1])}catch(a){return console.log("error onLoginResponse:",a),this.notifyError(500,a),this.disconnect(),void(this.showPinCodeDialog=!1)}this.showPinCodeDialog=!1,this.device.uname=i.uname,this.device.sysname=i.sysname,this.device.release=i.release,this.device.version=i.version,this.device.unique_id=i.unique_id,this.session=i.session,this.showPinCodeDialog=!1,this.loggedIn=!0,this.navigate()},postLogin:function(t){var e=this;this.showRegisterDialog=!1;var i=this,a="POST login\n\n"+t+"\n";this.send(a,i.onLoginResponse).catch(function(t){e.notifyError(500,t)})},createOrCopyDevice:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.$refs.selectBleTpl){t.next=5;break}return t.next=3,this.$refs.selectBleTpl.open();case 3:e=t.sent,e?(i="Use the bluetooth icon when you need to save your configuration on the device",l.$emit(d.a.apiSuccess,"",i),this.createDevice(e)):this.disconnect();case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),createDevice:function(){var t=this,e=m.getters.baseUrl+"/api/v2/account/devices";ln("creating a device:",this.device);var i={name:"new device",unique_id:this.device.unique_id,uname:this.device.uname,sysname:this.device.sysname,release:this.device.release,version:this.device.version};this.$http.put(e,i).then(function(t){if(200===t.data.status&&t.data.device._id){this.device=t.data.device;var e=this;setTimeout(function(){e.$router.push({name:"DeviceSettings",params:{id:e.device._id}})},800)}else this.notifyError(t.status,t.data)},function(e){t.notifyError(e.status,e.body.message)})},navigate:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){var e,i=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.device.unique_id){t.next=5;break}return this.notifyError(500,"could get a machine identifier"),console.log("no unique_id => disconnect"),this.disconnect(),t.abrupt("return");case 5:e=m.getters.baseUrl+"/api/v2/account/devices?unique_id="+this.device.unique_id,this.$http.get(e).then(function(t){null!==t.body.devices&&(0===t.body.devices.length?this.createOrCopyDevice():(this.device=t.body.devices[0],this.id=t.body.devices[0]._id,this.$router.push({name:"DeviceSettings",params:{id:this.id}})))},function(t){console.log("error could not navigate ..."),i.notifyError(500,"unable to navigate to device")});case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),send:function(t,e){var i=this;return new Promise(function(a,n){i.callback=function(t){t.substring(0,10).replace(/\D/g,"").startsWith("200")?(e(t),a(t)):(window.reload(),n(Error("promise reject")))},i.rwrite(t)})},rwrite:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=20;if(!l.writer)return console.log("attempt write attempt without connection"),this.connected=!1,this.loggedIn=!1,this.session=null,this.uname=null,this.unique_id=null,void this.$emit("ble-off");t.length>i?l.writer.writeValue(new TextEncoder("utf-8").encode(t.substr(i,a))).then(function(n){-1!==e.progress&&e.rwrite(t,i+a)}):l.writer.writeValue(new TextEncoder("utf-8").encode(""));var n=Math.round(1e3*i/t.length)/10;n!==this.progress&&(this.progress=n)},onMessage:function(t){this.callback?this.callback(t):(this.notifyError(500,"no callback on BLE message"),console.log("no callback for response"))},appendBuffer:function(t,e){var i=new Uint8Array(t.byteLength+e.byteLength);return i.set(new Uint8Array(t),0),i.set(new Uint8Array(e),t.byteLength),i.buffer},onReaderChanged:function(t){if(this.read_buffer=this.appendBuffer(this.read_buffer,t.target.value.buffer),""===new TextDecoder("utf-8").decode(t.target.value.buffer)){var e=new TextDecoder("utf-8").decode(this.read_buffer);this.read_buffer=new Uint8Array(0).buffer,this.onMessage(e)}},connect:function(){var t=this,e=this;if(!navigator.bluetooth)return this.connected=!1,this.bt_connection_error=!0,this.loggedIn=!1,this.session=null,this.uname=null,this.unique_id=null,void setTimeout(function(){t.$emit("ble-off")},3e3);navigator.bluetooth.requestDevice({filters:[{namePrefix:"youspot"}],optionalServices:[0,1]}).then(function(e){return t.peripheral=e,t.peripheral.addEventListener("gattserverdisconnected",t.onDisconnected),e.gatt.connect()}).then(function(t){t.getPrimaryServices().then(function(t){for(var i=function(i){t[i].getCharacteristics().then(function(a){var n=t[i].uuid;"00000000-0000-1000-8000-00805f9b34fb"===n&&(l.writer=a[0],console.log("set writer ",t[i].uuid,a[0].uuid)),t[i].uuid===n&&"00000001-0000-1000-8000-00805f9b34fb"===n&&(console.log("set reader ",t[i].uuid,a[0].uuid),l.reader=a[0],a[0].startNotifications().then(function(t){l.reader=t,l.reader.addEventListener("characteristicvaluechanged",e.onReaderChanged),e.onConnected()}))})},a=0;a<t.length;a++)i(a)}).catch(function(t){console.log(t),this.connected=!1,this.loggedIn=!1,this.session=null,this.uname=null,this.unique_id=null,this.$emit("ble-off")})}).catch(function(e){console.log(e),t.connected=!1,t.loggedIn=!1,t.session=null,t.uname=null,t.unique_id=null,t.$emit("ble-off")})}}},dn=un,pn=Object(_["a"])(dn,Ta,Oa,!1,null,null,null),vn=pn.exports,fn={name:"DeviceProvision",props:[],data:function(){return{stepValue:1,step:0,steps:[{title:"",component:null}]}},components:{"v-ble":vn},mounted:function(){l.$emit("set-title","Bluetooth provision")},methods:{notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},hn=fn,mn=Object(_["a"])(hn,Pa,Sa,!1,null,null,null),gn=mn.exports,bn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.device?i("v-container",{attrs:{fluid:"","grid-list-md":"","ma-0":"","pa-0":""}},[i("v-layout",{attrs:{"align-content-center":"",row:"",wrap:""}},[i("v-toolbar",[t.device.project?i("v-btn",{staticClass:"info",on:{click:function(e){return e.stopPropagation(),t.navigate("Devices")}}},[i("v-icon",{attrs:{left:""}},[t._v("nfc")]),t._v("\n          all devices\n        ")],1):t._e(),i("v-spacer"),t.device.project?i("v-btn",{staticClass:"info",on:{click:function(e){return e.stopPropagation(),t.navigate("ProjectSettings",t.device.project._id)}}},[i("v-icon",{attrs:{left:""}},[t._v("settings")]),t._v("\n            "+t._s(t.device.project.name)+"\n        ")],1):t._e(),i("v-btn",{staticClass:"info",on:{click:function(e){return e.stopPropagation(),t.navigate("DeviceSettings",t.device._id)}}},[i("v-icon",{attrs:{left:""}},[t._v("nfc")]),t._v("\n          "+t._s(t.device.name)+"\n        ")],1),i("v-device-stream",{attrs:{stream:t.stream,device:t.device},on:{onState:t.onState,onData:t.onData}})],1),i("v-flex",{staticClass:"pa-4",attrs:{xs12:""}},[i("v-tabs",{staticClass:"mt-0 pt-0 elevation-2",attrs:{centered:""},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}},[i("v-tab",{key:"datatable",attrs:{ripple:""}},[t._v("Data table")]),i("v-tab",{key:"charts",attrs:{ripple:""}},[t._v("Charts")]),i("v-tab",{key:"gauge",attrs:{ripple:""}},[t._v("Gauge")]),i("v-tab",{key:"export",attrs:{disabled:"",ripple:""}},[t._v("Export")]),i("v-tab-item",{key:"datatable"},[i("v-data-table",{staticClass:"mb-5",attrs:{pagination:t.pagination,headers:t.headers,items:t.messages,"item-key":"ts"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[i("tr",{on:{click:function(t){e.expanded=!e.expanded}}},[i("td",{on:{click:function(e){return t.itemClick()}}},[t._v(t._s(new Date(e.item.ts).toLocaleString()))]),i("td",{staticClass:"text-truncate text-no-wrap",on:{click:function(e){return t.itemClick()}}},[t._v(t._s(e.item.topic))]),i("td",{staticClass:"text-truncate text-no-wrap myellipsis",on:{click:function(e){return t.itemClick()}}},[i("div",{staticClass:"text-truncate text-no-wrap datacol"},[t._v("\n                "+t._s(e.item.data)+"\n              ")])])])]}},{key:"expand",fn:function(e){return[i("v-card",{key:e.item.ts,attrs:{flat:""}},[i("v-card-text",[i("v-container",{attrs:{fluid:"","grid-list-md":""}},[i("v-layout",{attrs:{"align-content-center":"",wrap:""}},[i("v-flex",{attrs:{xs12:"",md6:"","offset-md4":""}},[i("pre",{staticClass:"black white--text",staticStyle:{"background-color":"black"}},[t._v(t._s(e.item))])])],1)],1)],1)],1)]}}],null,!1,2597683317)})],1),i("v-tab-item",{key:"charts"},[t.messages.length>0?i("v-device-charts",{attrs:{active:1===t.mode,messages:t.messages},on:{onChange:t.onChartChange}}):t._e()],1),i("v-tab-item",{key:"gauges"},[i("v-device-gauges",{attrs:{active:2===t.mode,message:t.message}})],1)],1)],1)],1)],1):t._e()},_n=[],yn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"text-xs-right"},[i("v-btn",{staticClass:"primary",attrs:{disabled:!t.playing&&!t.stream},on:{click:t.stop}},[i("v-icon",{attrs:{left:"",color:"success"}},[t._v("stop")]),t._v("\n    Stop\n  ")],1),i("v-btn",{staticClass:"primary",attrs:{disabled:t.stream&&t.playing},on:{click:t.start}},[i("v-icon",{attrs:{left:"",color:"success"}},[t._v("play_arrow")]),t._v("\n    Play\n  ")],1)],1)},xn=[],wn=i("e7fc"),kn=i.n(wn),Cn={name:"DeviceStream",props:["device","stream"],data:function(){return{playing:!1,visible:!1,client:null,user:m.getters.user,message:{},topic:""}},watch:{stream:function(t){!0!==t||this.playing||this.start(),!1===t&&this.playing&&this.stop()}},mounted:function(){this.client&&this.client.end()},beforeDestroy:function(){this.client&&this.client.end()},methods:{start:function(){this.$emit("onState",!0),this.playing=!0,this.getMQTTClient()},stop:function(){this.$emit("onState",!1),this.playing=!1,this.client&&this.client.end(),this.client=null},getMQTTClient:function(){if(!this.device.access_tokens||this.device.access_tokens.length<1)return this.notifyError(500,"device has no access token"),null;var t=this.device.access_tokens[0].access_token,e={clientId:"upy-blue"+this.device._id,clean:!0,username:t,protocolId:"MQTT",protocolVersion:3,reconnectPeriod:5e3,path:"/mqtt"},i=this,a=window.location.hostname,n=kn.a.connect("wss://".concat(a,":8001/"),e);return this.client=n,n.on("connect",function(){var t="/v1/".concat(i.device._id,"/#");n.subscribe(t,function(e){i.stream&&e||(i.playing=!0,console.log("subscribed to",t),i.notifySuccess(200,"subscribed to ".concat(t)))})}),n.on("message",function(t,e){i.topic=t,i.message=e,i.$emit("onData",t,e)}),n.on("error",function(t){i.notifySuccess(500,t)}),n.on("close",function(){i.notifySuccess(200,"data stream closed"),i.playing=!1,n.end()}),n.on("offline",function(){console.log("wss went offline"),i.playing=!1,n.end()}),n},notifyError:function(t,e){console.log(d.a.apiError,t,e),this.$emit("onState",!1)},notifySuccess:function(t,e){l.$emit(d.a.apiSuccess,t,e)}}},jn=Cn,$n=Object(_["a"])(jn,yn,xn,!1,null,null,null),En=$n.exports,An=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.options?i("span",[i("v-data-table",{staticClass:"elevation-1",attrs:{color:"black","rows-per-page-items":[5,10,15,20,25,50,75,100],"total-items":this.MAX_STACK,"hide-headers":"",pagination:t.pagination,items:t.messages,"item-key":"ts"},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(t){}}],null,!1,1823034989)}),t.chartdata&&t.options?i("v-line-chart",{staticClass:"pa-2",attrs:{pagination:t.pagination,"chart-data":t.chartdata,options:t.options}}):t._e()],1):t._e()},Dn=[],Pn=(i("7514"),i("1fca")),Sn=Pn["b"].reactiveProp,Tn={extends:Pn["a"],mixins:[Sn],props:["options","pagination"],mounted:function(){console.log("render chart!"),this.renderChart(this.chartData,this.options)},watch:{pagination:function(){this.renderChart(this.chartData,this.options),console.log("line got page change")}}},On={props:["messages","active"],data:function(){return{stream:!1,pagination:{rowsPerPage:100},keys:[],datasets:[],loaded:!0,chartdata:null,MAX_STACK:100,options:null,colors:{}}},components:{"v-line-chart":Tn},methods:{getColor:function(t){return this.colors[t]||(this.colors[t]=this.dynamicColors()),this.colors[t]},dynamicColors:function(){var t=Math.floor(255*Math.random()),e=Math.floor(255*Math.random()),i=Math.floor(255*Math.random());return"rgb("+t+","+e+","+i+")"},buildDataLabels:function(t){!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var e=[],i=[],a=Object.assign({},{responsive:!0,maintainAspectRatio:!1});a.scales={},a.scales.yAxes=[];for(var n=(this.pagination.page-1)*this.pagination.rowsPerPage||0,s=n;s<n+(this.pagination.rowsPerPage||20);s++)if(t[s]&&t[s].ts&&t[s].data)for(var o in i.unshift(new Date(t[s].ts).toLocaleString()),t[s].data){var r=t[s].data[o];if(!isNaN(r)){var c=e.find(function(t){return t.label===o});if(c)c.data.unshift(r);else{var l={type:"linear",display:!0,position:e.length%2===0?"left":"right",id:"y-axis-"+e.length};a.scales.yAxes.unshift(l),this.options=Object.assign({},a);var u=this.getColor(o);c={label:o,borderColor:u,backgroundColor:u,fill:!1,data:[r],yAxisID:"y-axis-"+e.length},e.unshift(c)}}}return{datasets:e,labels:i}}},watch:{pagination:function(t){this.chartdata=null;var e=this.buildDataLabels(this.messages),i=e.datasets,a=e.labels;this.chartdata={labels:a.slice(),datasets:i.slice()},this.$emit("onChange",this.pagination)},active:function(t){if(t){var e=this;setTimeout(function(){var t=e.buildDataLabels(e.messages),i=t.datasets,a=t.labels;e.chartdata=Object.assign({labels:a,datasets:i},e.chartdata)},100)}},messages:function(t){if(this.chartdata){var e=this.buildDataLabels(t,!1),i=e.datasets,a=e.labels;this.chartdata={labels:a,datasets:i}}}}},In=On,Un=Object(_["a"])(In,An,Dn,!1,null,null,null),Ln=Un.exports,Rn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.message?i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"","mt-3":"","mb-0":"","pa-0":""}},[i("p",{staticClass:"yellow--text text--darken-1 text-xs-center"},[t._v("\n        "+t._s(new Date(t.message.ts).toLocaleString())+"\n      ")])]),t._l(t.gauges,function(e,a){return i("v-flex",{key:a,attrs:{"mb-1":"",md4:"",sm6:"",xs12:"","pa-1":""}},[i("v-card",{key:a,staticClass:"info ma-2 elevation-4"},[i("v-card-title",{staticClass:"mb-0 pb-0"},[t._v("\n        "+t._s(e.key)+"\n      ")]),i("v-card-text",{staticClass:"text-xs-center mt-0 pt-0"},[i("v-segment-display",{attrs:{number:e.value}}),i("v-layout",{staticClass:"fab-container",attrs:{row:""}},[i("v-btn",{attrs:{fab:"",small:""}},[i("v-icon",[t._v("build")])],1)],1)],1)],1)],1)})],2):t._e()},qn=[],Mn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"overflow-hidden"},[i("p",{staticStyle:{"font-family":"'DSEG7'","font-size":"5em"}},[t._v("\n\n    "+t._s(Math.trunc(1e3*t.number)/1e3)+"\n\n  ")])])},Wn=[],zn={props:["number"]},Nn=zn,Bn=Object(_["a"])(Nn,Mn,Wn,!1,null,null,null),Fn=Bn.exports,Vn={props:["message"],data:function(){return{keys:[],values:[],gauges:[]}},components:{"v-segment-display":Fn},watch:{active:function(t){console.log("active")},message:function(t){if(t&&t.data)for(var e in this.gauges=[],t.data)isNaN(t.data[e])||this.gauges.push({key:e,value:t.data[e]})}}},Kn=Vn,Hn=(i("11a4"),Object(_["a"])(Kn,Rn,qn,!1,null,null,null)),Yn=Hn.exports,Gn={name:"DeviceData",data:function(){return{MAX_STACK:100,client:null,stream:!1,user:m.getters.user,device:null,messages:[],message:{},mode:"datatable",pagination:{sortBy:"ts",descending:!0,rowsPerPage:10},headers:[{text:"timestamp",align:"left",value:"ts"},{text:"Topic",sortable:!1,value:"topic",width:"1%"},{text:"Data",sortable:!1,value:"data",width:"1%;"}]}},components:{"json-editor":ie["a"],"v-device-charts":Ln,"v-device-title":gt,"v-device-stream":En,"v-device-gauges":Yn},mounted:function(){l.$emit("set-title","data")},created:function(){this.loadDevice(this.$route.params.id)},beforeDestroy:function(){this.client&&this.client.end()},watch:{pagination:{handler:function(t){this.stream=!this.stream,1===t.page?this.stream=!0:this.stream=!1},deep:!0}},methods:{navigate:function(t,e){this.$router.push({name:t,params:{id:e}})},onChartChange:function(t){1!==t.page?this.stream=!1:this.stream=!0},itemClick:function(){return this.stream=!1,!0},init:function(){this.getBefore()},onState:function(t){this.stream=t},onData:function(t,e){var i=parseInt((new Date).getTime()/1e3,10);this.getAfter(i,100)},fillTop:function(t){for(var e=this.messages[0]?this.messages[0].ts:0,i=this.messages,a=0;a<t.length;a++){if(t[a].ts<=e)break;i.unshift(Object.assign({},{topic:t[a].topic,ts:t[a].ts,data:t[a].data})),i.length>this.MAX_STACK&&i.pop()}this.messages=i,this.message=i[0]},parseData:function(t){for(var e=[],i=0;i<t.length;i++)e.push(Object.assign({},{topic:t[i].topic,ts:t[i].ts,data:t[i].data}));this.messages=e,this.message=this.messages[0]},getAfter:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=this.device._id,n=m.getters.baseUrl+"/api/v2/data/device/"+a+"/after/"+t+"/"+i;this.$http.get(n).then(function(t){if(t.data.error)return this.notifyError(500,t.data.error.errmsg),void this.client.end();this.fillTop(t.data.messages)},function(t){e.notifyError(t.status,t.statusText)})},getBefore:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:parseInt((new Date).getTime()/1e3),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=this.device._id,n=m.getters.baseUrl+"/api/v2/data/device/"+a+"/before/"+e+"/"+i;this.$http.get(n).then(function(t){if(t.data.error)return this.notifyError(500,t.data.error.errmsg),void this.client.end();this.parseData(t.data.messages)},function(e){t.notifyError(e.status,e.statusText)})},loadDevice:function(t){var e=this,i=m.getters.baseUrl+"/api/v2/account/device/"+t;this.$http.get(i).then(function(t){t.data&&t.data.device&&t.data.device._id?(this.device=t.data.device,this.client=this.init(),l.$emit("set-title",this.device.name+" data stream")):(this.notifyError(500,"unexpected error DeviceSettings.loadDevice"),this.client&&this.client.end(),this.$router.push({name:"Devices"}))},function(t){e.notifyError(t.status,t.statusText)})},notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},notifySuccess:function(t,e){l.$emit(d.a.apiSuccess,t,e)},back:function(){this.$router.push({name:"Devices"})}}},Jn=Gn,Qn=(i("3d06"),Object(_["a"])(Jn,bn,_n,!1,null,null,null)),Zn=Qn.exports,Xn=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",[i("v-flex",{attrs:{"mt-4":"",xs12:"","offset-md2":"",md8:""}},[i("v-card",{staticClass:"upy-card",attrs:{"mt-2":""}},[i("v-card-text",{staticClass:"pb-5",attrs:{"pb-4":""}},[i("v-list",{attrs:{subheader:"","two-line":""}},[i("v-subheader",{staticClass:"applications"},[t._v("Applications")]),t._l(t.applications,function(e,a){return[i("span",{key:a},[i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{staticClass:"mr-3",on:{click:function(i){return t.openApplication(e._id)}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.name))]),i("v-list-tile-sub-title",[t._v(t._s(e.slug))])],1),i("v-list-tile-action",[i("v-icon",[t._v("settings")])],1)],1)],1)]})],2)],1)],1),i("v-btn",{attrs:{fixed:"",right:"",bottom:"",fab:"",color:"info"},on:{click:t.addApplication}},[i("v-icon",[t._v("add")])],1)],1),i("v-dialog-name",{ref:"application"})],1)},ts=[],es={name:"Applications",props:["config"],data:function(){return{user:m.getters.user,applications:[]}},components:{"v-dialog-name":X},created:function(){this.loadApplications()},mounted:function(){l.$emit("set-title","manage applications")},methods:{openApplication:function(t){this.$router.push({name:"ApplicationSettings",params:{id:t}})},addApplication:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){var e,i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.application.open("Add application","Please set a application name",{color:"info"});case 2:if(e=t.sent,e){t.next=6;break}return this.notifyError(400,"application name is required"),t.abrupt("return");case 6:i=m.getters.baseUrl+"/api/v2/applications",this.$http.put(i,{name:e}).then(function(t){200===t.data.status&&t.data.application._id?this.$router.push({name:"ApplicationSettings",params:{id:t.data.application._id}}):(console.log(t.data),this.notifyError(t.body.status,t.body.error))},function(t){console.log(t),a.notifyError(t.status,t.body.message)});case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadApplications:function(){var t=this,e=m.getters.baseUrl+"/api/v2/applications";this.$http.get(e).then(function(t){null!==t.body.data&&(this.applications=t.body.applications)},function(e){console.log(e),t.notifyError(e.status,e.body.message)})},notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},is=es,as=Object(_["a"])(is,Xn,ts,!1,null,null,null),ns=as.exports,ss=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{fluid:"","grid-list-md":""}},[i("v-layout",{attrs:{"align-content-center":"",wrap:""}},[i("v-flex",{attrs:{xs12:"","d-flex":""}},[i("v-card",{staticClass:"upy-card",attrs:{height:"100%"}},[i("v-card-title",{staticClass:"applications"},[t._v("General")]),i("v-card-text",[i("v-layout",[i("v-flex",{attrs:{xs8:""}},[i("v-text-field",{attrs:{"full-width":"",label:"application name"},model:{value:t.application.name,callback:function(e){t.$set(t.application,"name",e)},expression:"application.name"}})],1),i("v-flex",{attrs:{xs4:""}},[i("v-text-field",{attrs:{"full-width":"",placeholder:"...",label:"version code"},model:{value:t.application.version,callback:function(e){t.$set(t.application,"version",e)},expression:"application.version"}})],1)],1)],1)],1)],1),"fw_build"==t.code_origin?i("v-flex",{attrs:{"d-flex":"",xs12:"",md12:"","pa-1":""}},[i("v-fw-build-upload",{attrs:{application:t.application},on:{update:function(e){return t.loadApplication(t.application._id)}}})],1):t._e(),i("v-flex",{attrs:{"d-flex":"",xs12:"","pa-1":""}},[i("v-flash-upload",{attrs:{application:t.application},on:{update:function(e){return t.loadApplication(t.application._id)}}})],1),i("v-flex",{attrs:{"d-flex":"",xs12:""}},[i("v-card",{staticClass:"upy-card flexcard",attrs:{height:"100%"}},[i("v-card-title",{staticClass:"applications"},[t._v("Advanced")]),i("v-card-text",{staticClass:"grow"},[i("v-list",{attrs:{"two-line":""}},[i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.navigate("ApplicationSettingsAdvanced")}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                          Application configuration\n                        ")]),i("v-list-tile-sub-title",[t._v("\n                          Parameters available on all devices\n                        ")])],1),i("v-list-tile-action",[i("v-icon",[t._v("settings")])],1)],1),i("v-divider",{staticClass:"mr-3"}),i("v-list-tile",{on:{click:function(e){return t.navigate("ApplicationCodec")}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                          Codec\n                        ")]),i("v-list-tile-sub-title",[t._v("\n                          Decode payload to data\n                        ")])],1),i("v-list-tile-action",[i("v-icon",[t._v("code")])],1)],1),i("v-divider",{staticClass:"mr-3"})],1)],1),i("v-card-actions",[i("v-btn",{staticClass:"warning",on:{click:function(e){return t.deleteApplication()}}},[t._v("\n              Delete application\n            ")])],1)],1)],1),i("v-btn",{attrs:{fab:"",fixed:"",bottom:"",right:"",color:"info"},nativeOn:{click:function(e){return t.saveApplication()}}},[i("v-icon",[t._v("done")])],1),i("v-confirm",{ref:"confirm"})],1)],1)},os=[],rs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"upy-card flexcard"},[i("v-card-title",{staticClass:"applications"},[t._v("Base firmware")]),i("v-card-text",{staticClass:"grow"},[i("p",[t._v("You can upload a firmware build or select a branch to build your\n      application.")]),i("v-text-field",{attrs:{"full-width":"",label:"git branch to build"},model:{value:t.gitUrl,callback:function(e){t.gitUrl=e},expression:"gitUrl"}}),i("p",{staticClass:"text-xs-center"})],1),i("v-card-actions",[i("upload-btn",{attrs:{uniqueId:"",primary:"",fileChangedCallback:t.fwUpload}},[i("template",{slot:"icon"},[i("v-icon",{staticClass:"ml-2"},[t._v("cloud_upload")])],1)],2),i("v-btn",{staticClass:"warning",attrs:{disabled:"",flat:""},on:{click:function(e){t.toggle_upload=!0}}},[t._v("Make ...")])],1),i("v-confirm",{ref:"confirm"})],1)},cs=[],ls=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-select",{attrs:{items:t.boards,label:"Board"},on:{change:t.changedValue}})},us=[],ds={data:function(){return{boards:["WIPY","LOPY","SIPY","GPY","FIPY","LOPY4"]}},methods:{changedValue:function(t){this.$emit("onChange",t)}}},ps=ds,vs=Object(_["a"])(ps,ls,us,!1,null,null,null),fs=vs.exports,hs=void 0,ms={props:["application"],components:{"v-confirm":H,"v-select-board":fs,"upload-btn":zt.a},data:function(){return{}},computed:{gitUrl:function(){return hs.application&&hs.application.firmware&&hs.application.firmware.git_url?hs.application.firmware.git_url:null}},methods:{deleteFw:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete firmware ","Are you sure you want to delete ".concat(e.filename," from the server ?"),{color:"warning"});case 2:if(!t.sent){t.next=6;break}i=this.application._id,a="".concat(m.getters.baseUrl,"/api/v2/application/").concat(i,"/firmware/").concat(e.board,"/").concat(e._id),this.$http.delete(a).then(function(){this.$emit("update")}).catch(function(t){this.notifyError(t.status,t.statusText),this.$emit("update")});case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),fwUpload:function(t){var e=this.application._id,i="".concat(m.getters.baseUrl,"/api/v2/application/").concat(e,"/firmware/").concat(this.board),a=new FormData;a.append("file",t),this.$http.put(i,a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(){this.$emit("update"),this.toggle_upload=!1}).catch(function(t){this.notifyError(t.status,t.statusText)})}}},gs=ms,bs=Object(_["a"])(gs,rs,cs,!1,null,null,null),_s=bs.exports,ys=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-card",{staticClass:"upy-card flexcard",attrs:{height:"100%"}},[i("v-card-title",{staticClass:"applications"},[t._v("\n    Application description\n  ")]),i("v-card-text",{staticClass:"grow"},[t.application.flash&&t.application.flash.manifest?i("v-list",{attrs:{"two-line":""}},[i("v-list-group",{attrs:{"prepend-icon":"folder","no-action":""},model:{value:t.toggleContent,callback:function(e){t.toggleContent=e},expression:"toggleContent"}},[i("v-list-tile",{attrs:{slot:"activator"},slot:"activator"},[i("v-list-tile-content",[i("v-list-tile-title",[t._v("/flash/")])],1),i("v-list-tile-action",[i("v-list-tile-action-text",[t._v(t._s(t.totalSize()))])],1)],1),t._l(t.application.flash.manifest,function(e){return t.application.flash?i("v-list-tile",{key:e.path,on:{click:!0}},[i("v-list-tile-content",[i("v-list-tile-title",{staticClass:"caption ml-4"},[t._v(t._s(e.path))])],1),i("v-list-tile-action",[i("v-list-tile-action-text",[t._v(t._s(t.fsize(e.size)))])],1)],1):t._e()})],2)],1):t._e(),t.application.flash&&!t.application.flash.manifest?i("v-flex",{attrs:{xs12:""}},[i("p",[t._v("You can upload a file or grab an Git URL with commit trigger enabled,\n          in both case you must provide the flash directory in archive.")]),i("v-form",{ref:"form"},[i("v-layout",[i("v-flex",[i("v-text-field",{staticStyle:{"margin-right":"96px","margin-bottom":"0px"},attrs:{clearable:"",outline:"",label:"Sync folder in ZIP","full-width":""},model:{value:t.application.flash.sync_folder,callback:function(e){t.$set(t.application.flash,"sync_folder",e)},expression:"application.flash.sync_folder"}})],1)],1),i("v-layout",{attrs:{row:""}},[i("v-flex",{attrs:{xs3:""}},[i("upload-btn",{staticClass:"uniqueId icon",attrs:{disabled:!t.application.flash.sync_folder,fileChangedCallback:t.uploadFlash}},[i("template",{slot:"icon"},[i("v-icon",{staticClass:"white--text"},[t._v("cloud_upload")])],1)],2)],1),i("v-flex",{attrs:{xs6:""}},[i("v-text-field",{ref:"zip_url",attrs:{clearable:"",outline:"",label:"https://...",rules:t.zipUrlRules},model:{value:t.application.flash.zip_url,callback:function(e){t.$set(t.application.flash,"zip_url",e)},expression:"application.flash.zip_url"}})],1),i("v-flex",{attrs:{xs3:""}},[i("v-btn",{staticClass:"primary",attrs:{primary:"",disabled:!t.application.flash.sync_folder},on:{click:t.grabZip}},[t._v("fetch url"),i("v-icon",[t._v("get_app")])],1)],1)],1)],1)],1):t._e(),t.application.flash&&!t.application.flash.manifest&&t.application.flash.sync_folder?i("v-flex",{staticClass:"mt-2",attrs:{xs12:""}},[i("v-form",{ref:"form"})],1):t._e(),t.application.flash&&t.application.flash.zip_url?i("span",[i("span",[t._v("your flash is download from")]),i("br"),t._v(t._s(t.application.flash.zip_url)),i("br"),i("span",{staticClass:"white--text"},[t._v("your trigger url is POST")]),i("br"),t._v(t._s(t.triggerUrl)+"\n    ")]):t._e(),t.application.flash?i("span",[t._v("version "+t._s(t.application.flash.__v))]):t._e()],1),i("v-card-actions",[i("v-btn",{staticClass:"warning",attrs:{disabled:!(t.application.flash&&t.application.flash.manifest),flat:""},on:{click:function(e){return t.deleteFlash()}}},[t._v("REMOVE")]),i("v-btn",{staticClass:"primary",attrs:{flat:""},on:{click:function(e){return t.saveFlash()}}},[t._v("SAVE")]),t.application.flash&&t.application.flash.zip_url?i("v-btn",{staticClass:"primary",attrs:{flat:""},on:{click:function(e){return t.grabZip()}}},[t._v("grab zip")]):t._e()],1),i("v-confirm",{ref:"confirm"})],1)},xs=[],ws=i("49d5"),ks=i.n(ws),Cs={props:["application"],components:{"v-confirm":H,"upload-btn":zt.a},data:function(){return{flash:null,toggleContent:!1,zipUrl:null,syncFolderRules:[function(t){return/^(?!\/).\w.+[a-z]$/.test(t)||"Sync folder must not start or end by /"}],zipUrlRules:[function(t){return/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&\/\/=]*)/.test(t)||"Url must be valid"},function(t){return t&&t.includes(".zip")||'Url must contains ".zip"'}]}},computed:{triggerUrl:function(){return window.location.origin+"/trigger/flash/zip/"+this.application.flash._id}},methods:{grabZip:function(){var t=this.application._id,e=m.getters.baseUrl+"/api/v2/application/".concat(t,"/flash"),i=new FormData;i.append("zip_url",this.application.flash.zip_url),i.append("sync_folder",this.application.flash.sync_folder||"/"),this.$http.put(e,i).then(function(t){if(200===t.body.status){this.toggleContent=!0;var e=this;setTimeout(function(){e.toggleContent=!1},200),this.$emit("update")}else this.notifyError(t.body.status,t.body.error)}).catch(function(t){console.log(t),this.notifyError(t.status,t.statusText),this.$emit("update")})},totalSize:function(){var t=ks.a.partial({standard:"iec"});if(!this.application||!this.application.flash||this.application.flash.manifest||0===this.application.flash.manifest.length)return t(0);for(var e=this.application.flash.manifest,i=0,a=0;a<e.length;a++)e[a].size&&(i+=e[a].size);try{return t(i)}catch(n){return console.log(i,n),""}},fsize:function(t){if(t){var e=ks.a.partial({standard:"iec"});try{return e(t)}catch(i){return console.log(t,i),""}}},deleteFlash:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(){var e,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete flash ","Are you sure you want to delete flash application zip from the server ?",{color:"warning"});case 2:if(!t.sent){t.next=6;break}e=this.application._id,i=m.getters.baseUrl+"/api/v2/application/".concat(e,"/flash"),this.$http.delete(i).then(function(t,e){console.log(t,e),this.$emit("update")}).catch(function(t){this.notifyError(t.status,t.statusText),this.$emit("update")});case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},uploadFlash:function(t,e){var i=this.application._id,a=m.getters.baseUrl+"/api/v2/application/".concat(i,"/flash"),n=new FormData;n.append("file",t),n.append("sync_folder",this.application.flash.sync_folder||"/"),this.$http.put(a,n,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){if(200===t.body.status){this.toggleContent=!0;var e=this;setTimeout(function(){e.toggleContent=!1},200),this.$emit("update")}else this.notifyError(t.body.status,t.body.error)}).catch(function(t){window.location.reload(),this.notifyError(t.status,t.statusText),this.$emit("update")})}}},js=Cs,$s=(i("792e"),Object(_["a"])(js,ys,xs,!1,null,null,null)),Es=$s.exports,As={name:"Application",data:function(){return{user:m.getters.user,platform_default:!0,application:{},code_origin:"fw_build",config:{}}},components:{"v-confirm":H,"v-fw-build-upload":_s,"v-flash-upload":Es,"v-mqtt":Gt},mounted:function(){this.loadApplication(this.$route.params.id)},methods:{navigate:function(t){this.$router.push({name:t,params:{id:this.application._id,configuration:this.configuration,application:this.application}})},mqttEdit:function(t){this.application.mqtt=t},saveApplication:function(){var t=this,e=m.getters.baseUrl+"/api/v2/application/"+this.application._id,i=this.application;this.$http.post(e,i).then(function(t){200===t.body.status?this.$router.push({name:"Applications"}):this.notifyError(t.body.status,t.body.error)},function(e){console.error(e),t.notifyError(e.status,e.body.message)})},loadApplication:function(t){var e=this,i=m.getters.baseUrl+"/api/v2/application/"+t;this.$http.get(i).then(function(t){t.data.status&&200===t.data.status?t.data&&t.data.application&&(this.application=t.data.application,console.log(this.application)):this.notifyError(t.data.status,t.data.error),l.$emit("set-title","edit app ".concat(t.data.application.slug))},function(t){e.notifyError(t.status,t.statusText)})},deleteApplication:function(){var t=Object(z["a"])(regeneratorRuntime.mark(function t(e){var i,a=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$refs.confirm.open("Delete application","Are you sure?",{color:"warning"});case 2:if(!t.sent){t.next=5;break}i=m.getters.baseUrl+"/api/v2/application/"+this.application._id,this.$http.delete(i).then(function(t){this.$router.push({name:"Applications"})},function(t){a.notifyError(t.status,t.statusText)});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},Ds=As,Ps=(i("29f7"),Object(_["a"])(Ds,ss,os,!1,null,"6c615bf4",null)),Ss=Ps.exports,Ts=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticClass:"upy-card white"},[i("v-card-title",[t._v("\n            "+t._s(t.application.name)+" "),i("br"),t._v("\n             update version "+t._s(t.application.__v)+"\n          ")]),i("v-card-text",[i("json-editor",{ref:"editor",attrs:{onChange:t.onConfigChange,json:t.configuration}})],1),i("v-btn",{attrs:{absolute:"",fab:"",bottom:"",right:"",color:"primary"},nativeOn:{click:function(e){return t.saveApplication()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1)],1)},Os=[],Is={name:"AdvancedApplicationSettings",components:{"json-editor":ie["a"]},data:function(){return{application:{},configuration:null,output:null,mode:"tree",version:null}},created:function(){this.loadApplication(this.$route.params.id)},mounted:function(){l.$emit("set-title","Advanced application configuration");var t=this.$refs.editor.editor;t.setMode(this.mode)},methods:{onConfigChange:function(t){this.output=Object.assign({},t)},saveApplication:function(){var t=this,e=m.getters.baseUrl+"/api/v2/application/"+this.$route.params.id;if(JSON.stringify(this.output)!==JSON.stringify(this.application.configuration)){var i=Object.assign(this.application,{configuration:this.output});this.$http.post(e,i).then(function(t){this.$router.push({name:"ApplicationSettings",params:{id:this.$route.params.id}})},function(e){console.log(e),t.notifyError(e.status,e.body.message)})}else this.$router.push({name:"ApplicationSettings",params:{id:this.$route.params.id}})},loadApplication:function(){var t=this,e=m.getters.baseUrl+"/api/v2/application/"+this.$route.params.id,i=this;this.$http.get(e).then(function(t){if(t.data.application)if(this.application=t.data.application,l.$emit("set-title",this.application.name+" advanced configuration"),t.data.application.configuration){this.configuration=t.data.application.configuration,this.output=t.data.application.configuration;var e=i.$refs.editor.editor;setTimeout(function(){e.expandAll()},1)}else this.configuration={},this.notifyError(500,"an empty configuration has been created")},function(e){t.notifyError(e.status,e.statusText)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},Us=Is,Ls=(i("f118"),Object(_["a"])(Us,Ts,Os,!1,null,null,null)),Rs=Ls.exports,qs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{"fill-height":"","justify-center":"","justify-start":"",fluid:"","grid-list-sm":""}},[i("v-layout",{attrs:{"align-start":"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-card",{staticClass:"white"},[i("v-card-text",[i("h2",{staticClass:"pa-2 mt-2 primary"},[t._v("Decode")]),t.codec.decode?i("codemirror",{ref:"editor",staticClass:"code",attrs:{value:t.codec.decode},on:{change:t.decodeChange}}):t._e(),i("h2",{staticClass:"pa-2 mt-2 primary"},[t._v("Encode")]),t.codec.encode?i("codemirror",{ref:"editor",staticClass:"code",attrs:{value:t.codec.encode},on:{change:t.encodeChange}}):t._e()],1),i("v-btn",{attrs:{absolute:"",fab:"",bottom:"",right:"",color:"primary"},nativeOn:{click:function(e){return t.saveApplication()}}},[i("v-icon",[t._v("done")])],1)],1)],1)],1)],1)},Ms=[];i("f9d4"),i("693d"),i("9b74"),i("f6b6"),i("3c98");var Ws="function (topic, payload) {\n  const obj = {}\n  object.raw = payload // apply your codec here\n  return obj\n}",zs="function (topic, data) {\n  const raw = atob(data) // apply your codec here\n  return raw\n}",Ns={decode:Ws,encode:zs},Bs={name:"ApplicationCodec",components:{},data:function(){return{application:{},codec:Ns,output:{},version:null}},created:function(){this.loadApplication(this.$route.params.id)},mounted:function(){l.$emit("set-title","Application codec")},methods:{encodeChange:function(t){var e={encode:t,decode:this.output.decode};this.output=e},decodeChange:function(t){var e={decode:t,encode:this.output.encode};this.output=e},saveApplication:function(){var t=this,e=m.getters.baseUrl+"/api/v2/application/"+this.$route.params.id+"/codec";JSON.stringify(this.output)!==JSON.stringify(this.application.codec)?this.$http.post(e,{codec:this.output}).then(function(t){this.$router.push({name:"ApplicationSettings",params:{id:this.$route.params.id}})},function(e){console.log(e),t.notifyError(e.status,e.body.message)}):this.$router.push({name:"ApplicationSettings",params:{id:this.$route.params.id}})},loadApplication:function(){var t=this,e=m.getters.baseUrl+"/api/v2/application/"+this.$route.params.id;this.$http.get(e).then(function(t){t.data.application&&(this.application=t.data.application,l.$emit("set-title",this.application.name+" codec"),t.data.application.codec?(this.codec=t.data.application.codec,this.output=t.data.application.codec):(this.codec=Ns,this.output=Ns))},function(e){t.notifyError(e.status,e.statusText)})},notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},Fs=Bs,Vs=(i("c7ff"),Object(_["a"])(Fs,qs,Ms,!1,null,null,null)),Ks=Vs.exports,Hs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",[i("v-flex",{attrs:{"ma-4":""}},[i("v-card",{staticStyle:{width:"100%"}},[i("v-card-text",[i("v-scan-ports"),i("v-download-flash"),i("v-esp-progress"),i("v-apply-flash")],1)],1)],1)],1)},Ys=[],Gs=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",[i("v-flex",{staticClass:"pa-1 ma-1 xs6 text-xs-center"},[t.pending?t._e():i("v-select",{attrs:{items:t.serialPorts2,label:"Serial ports","prepend-icon":"refresh"},on:{"click:prepend":t.scanPorts},model:{value:t.serialPort,callback:function(e){t.serialPort=e},expression:"serialPort"}}),t.pending?i("v-progress-circular",{attrs:{indeterminate:!0}}):t._e(),t.pending?i("span",[i("p",[t._v("scanning  ...")])]):t._e()],1)],1)},Js=[],Qs=i("db49"),Zs=i.n(Qs),Xs={name:"SerialPort",data:function(){return{pending:!1}},computed:{serialPorts2:function(){return this.$store.state.serialPorts},serialPort:function(){return this.$store.state.serialPort}},methods:{scanPorts:function(){var t=this;this.pending=!0;var e=Zs.a.API_LOCATION+"scan_ports";this.$http.get(e).then(function(e){t.$store.commit("updateSerialPorts",e.data),t.pending=!1,t.$store.state.serialPort||t.$store.commit("setSerialPort",e.data[0])}).catch(function(e){t.pending=!1})}},mounted:function(){}},to=Xs,eo=Object(_["a"])(to,Gs,Js,!1,null,"c1cfb58c",null),io=eo.exports,ao=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",[i("v-flex",{staticClass:"pa-1 ma-1 xs9 text-xs-center"},[i("v-select",{attrs:{items:t.firmwares,"item-text":"label","item-value":"url",label:"Select a Firmware"},on:{change:t.download},model:{value:t.fw,callback:function(e){t.fw=e},expression:"fw"}}),t.pending?i("v-progress-circular",{attrs:{indeterminate:!0}}):t._e(),t.pending?i("span",[i("p",[t._v("downloading data ...")])]):t._e()],1)],1)},no=[],so={name:"DownloadFlash",data:function(){return{firmwares:Zs.a.FIRMWARES,pending:!1,fw:null}},computed:{localFW:function(){return this.$store.state.localFW}},methods:{download:function(t){var e=this;this.pending=!0;var i=Zs.a.API_LOCATION+"dl_flash?url="+this.fw;this.$http.get(i).then(function(t){e.pending=!1,e.$store.commit("setLocalFirmware",t.data.filename)}).catch(function(t){e.pending=!1})}}},oo=so,ro=Object(_["a"])(oo,ao,no,!1,null,"9041e4e0",null),co=ro.exports,lo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",[i("v-flex",{staticClass:"text-xs-center xs12"},[i("v-btn",{staticClass:"primary mr-4",staticStyle:{width:"calc(100% - 16px)"},attrs:{disabled:!t.canRun},on:{click:function(e){return e.stopPropagation(),t.flash(e)}}},[t._v("Flash")])],1)],1)},uo=[],po={name:"ApplyFlash",data:function(){return{pending:!1}},computed:{canRun:function(){return!this.pending&&this.$store.state.localFW},getLocalFW:function(){return this.$store.state.localFW}},methods:{flash:function(){var t=this;this.pending=!0;var e="0x1000",i="/tmp/application.bin",a=Zs.a.API_LOCATION+"write_flash?port="+this.$store.state.serialPort+"&addr="+e+"&filename="+i;this.$http.get(a).then(function(e){t.pending=!1,t.$store.commit("localFile",e.data.filename)}).catch(function(e){t.pending=!1})}}},vo=po,fo=Object(_["a"])(vo,lo,uo,!1,null,"332c835c",null),ho=fo.exports,mo=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-layout",[i("v-flex",{attrs:{xs12:"","ma-2":"","pt-4":"","pb-4":""}},[t.progressValue>0?i("v-progress-linear",{attrs:{color:"orange"},model:{value:t.progressValue,callback:function(e){t.progressValue=e},expression:"progressValue"}}):t._e()],1)],1)},go=[],bo={name:"ApplyFlash",data:function(){return{message:"",progressValue:0,status:"disconnected"}},mounted:function(){this.connect()},methods:{connect:function(){var t=this;this.socket=new WebSocket("ws://127.0.0.1:8765"),this.socket.onopen=function(){t.status="connected",t.socket.onmessage=function(e){var i=e.data;t.progressValue=JSON.parse(i).progressValue}}},disconnect:function(){this.socket.close(),this.status="disconnected",this.logs=[]},sendMessage:function(t){this.socket.send(this.message),this.logs.push({event:"Sent message",data:this.message}),this.message=""}}},_o=bo,yo=Object(_["a"])(_o,mo,go,!1,null,null,null),xo=yo.exports,wo={name:"app",components:{"v-scan-ports":io,"v-download-flash":co,"v-apply-flash":ho,"v-esp-progress":xo},mounted:function(){this.$store.commit("setLocalFirmware",null)}},ko=wo,Co=Object(_["a"])(ko,Hs,Ys,!1,null,null,null),jo=Co.exports,$o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.device?i("v-container",{attrs:{fluid:"","grid-list-md":"","ma-0":"","pa-0":""}},[i("v-layout",{attrs:{"align-content-center":"",row:"",wrap:""}},[i("v-flex",{attrs:{xs12:""}},[i("v-navigation-drawer",{attrs:{permanent:"",fixed:"",right:"",app:""},model:{value:t.drawerRight,callback:function(e){t.drawerRight=e},expression:"drawerRight"}},[i("v-list",{attrs:{avatar:"","three-line":""}},[i("v-subheader",[t._v(t._s(t.device.name))]),i("v-list-tile",{attrs:{avatar:""}},[i("v-list-tile-action",[i("v-icon",{attrs:{color:"indigo"}},[t._v("location_off")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                  No data\n              ")])],1),i("v-list-tile-action",[i("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(e){return e.stopPropagation(),t.navigate("DeviceSettings",t.device._id)}}},[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("edit")])],1)],1)],1),t._l(t.messages,function(e){return[i("v-list-tile",{key:e.title,attrs:{avatar:""},on:{click:function(i){return t.navigate("DeviceData",e._id)}}},[i("v-list-tile-action",[i("v-icon",{attrs:{color:"indigo"}},[t._v("nfc")])],1),i("v-list-tile-content",[i("v-list-tile-title",[t._v("\n                "+t._s(e.name)+"\n            ")]),i("v-list-tile-sub-title",{domProps:{innerHTML:t._s(e.unique_id)}})],1),i("v-list-tile-action",[i("v-btn",{attrs:{icon:"",ripple:""}},[i("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("info")])],1)],1)],1)]})],2)],1),i("v-card",{staticClass:"white ma-4 ml-1",staticStyle:{height:"100%"}},[i("l-map",{ref:"mapref",staticStyle:{height:"505px",width:"calc(100% + 0px)"},attrs:{zoom:t.zoom}},[i("l-tile-layer",{attrs:{url:t.url,attribution:t.attribution}})],1)],1)],1)],1)],1):t._e()},Eo=[],Ao={name:"DeviceData",data:function(){return{zoom:1,user:m.getters.user,device:null,messages:[],message:{},drawerRight:!0,pagination:{sortBy:"ts",descending:!0,rowsPerPage:10},url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}},components:{LMap:yt["a"],LTileLayer:xt["a"],LMarker:wt["a"],LTooltip:kt["a"]},mounted:function(){l.$emit("set-title","data")},created:function(){this.loadDevice(this.$route.params.id)},beforeDestroy:function(){this.client&&this.client.end()},watch:{pagination:{handler:function(t){this.stream=!this.stream,1===t.page?this.stream=!0:this.stream=!1},deep:!0}},methods:{navigate:function(t,e){this.$router.push({name:t,params:{id:e}})},init:function(){this.getBefore()},onState:function(t){this.stream=t},onData:function(t,e){var i=parseInt((new Date).getTime()/1e3,10);this.getAfter(i,100)},fillTop:function(t){for(var e=this.messages[0]?this.messages[0].ts:0,i=this.messages,a=0;a<t.length;a++){if(t[a].ts<=e)break;i.unshift(Object.assign({},{topic:t[a].topic,ts:t[a].ts,data:t[a].data})),i.length>this.MAX_STACK&&i.pop()}this.messages=i,this.message=i[0]},parseData:function(t){for(var e=[],i=0;i<t.length;i++)e.push(Object.assign({},{topic:t[i].topic,ts:t[i].ts,data:t[i].data}));this.messages=e,this.message=this.messages[0]},getAfter:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=this.device._id,n=m.getters.baseUrl+"/api/v2/data/device/"+a+"/after/"+t+"/"+i;this.$http.get(n).then(function(t){if(t.data.error)return this.notifyError(500,t.data.error.errmsg),void this.client.end();this.fillTop(t.data.messages)},function(t){e.notifyError(t.status,t.statusText)})},getBefore:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:parseInt((new Date).getTime()/1e3),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=this.device._id,n=m.getters.baseUrl+"/api/v2/data/device/"+a+"/before/"+e+"/"+i;this.$http.get(n).then(function(t){if(t.data.error)return this.notifyError(500,t.data.error.errmsg),void this.client.end();this.parseData(t.data.messages)},function(e){t.notifyError(e.status,e.statusText)})},loadDevice:function(t){var e=this,i=m.getters.baseUrl+"/api/v2/account/device/"+t;this.$http.get(i).then(function(t){t.data&&t.data.device&&t.data.device._id?(this.device=t.data.device,this.client=this.init(),l.$emit("set-title"," path")):(this.notifyError(500,"unexpected error DeviceSettings.loadDevice"),this.client&&this.client.end(),this.$router.push({name:"Devices"}))},function(t){e.notifyError(t.status,t.statusText)})},notifyError:function(t,e){l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)},notifySuccess:function(t,e){l.$emit(d.a.apiSuccess,t,e)},back:function(){this.$router.push({name:"Devices"})}}},Do=Ao,Po=(i("10b5"),Object(_["a"])(Do,$o,Eo,!1,null,null,null)),So=Po.exports,To=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",{attrs:{row:"",fluid:"","fill-height":""}},[i("v-layout",{staticClass:"fill-height",attrs:{row:"",fluid:""}},[i("v-flex",[i("v-card",[i("v-card-text",[t._v("\n            Please enter your personal activation code\n            "),i("v-text-field",{model:{value:t.personalActivationCode,callback:function(e){t.personalActivationCode=e},expression:"personalActivationCode"}})],1),i("v-card-actions",[i("v-btn",{staticClass:"primary",attrs:{primary:""},on:{click:function(e){return e.stopPropagation(),t.submit(e)}}},[t._v("Submit")])],1)],1)],1)],1)],1)},Oo=[],Io={name:"DevicesClaim",props:[],data:function(){return{personalActivationCode:null}},components:{},mounted:function(){l.$emit("set-title","Devices claim")},methods:{notifyError:function(t,e){console.log(d.a.apiError,t,e),l.$emit(d.a.apiError,t,e),l.$emit(d.a.loadingEnd)}}},Uo=Io,Lo=Object(_["a"])(Uo,To,Oo,!1,null,null,null),Ro=Lo.exports;a["default"].use(C["a"]);var qo=new C["a"]({routes:[{path:"/",name:"Welcome",component:q},{path:"/profile",name:"UserProfile",component:lt},{path:"/devices",name:"Devices",component:Et},{path:"/projects",name:"Projects",component:Ot},{path:"/project/settings/:id",name:"ProjectSettings",component:Xt},{path:"/project/settings/advanced/:id",name:"ProjectAttributes",component:pe},{path:"/project/webhooks/:id",name:"ProjectWebhooks",component:We},{path:"/project/wizard/cloud/:id",name:"ProjectCloudWizard",component:Qe},{path:"/applications",name:"Applications",component:ns},{path:"/applications/settings/:id",name:"ApplicationSettings",component:Ss},{path:"/applications/settings/advanced/:id",name:"ApplicationSettingsAdvanced",component:Rs},{path:"/applications/codec/:id",name:"ApplicationCodec",component:Ks},{path:"/device/settings/:id",name:"DeviceSettings",component:hi},{path:"/device/settings/wifi/:id",name:"DeviceWifiSettings",component:da,props:!0},{path:"/device/settings/lte/:id",name:"DeviceLTESettings",component:ga,props:!0},{path:"/device/settings/lora/:id",name:"DeviceLoRaSettings",component:Da,props:!0},{path:"/device/settings/ble/:id",name:"DeviceBLESettings",component:ka,props:!0},{path:"/device/settings/attributes/:id",name:"DeviceAttributes",component:Oi},{path:"/device/settings/map/:id",name:"DeviceMap",component:Mi},{path:"/device/settings/advanced/:id",name:"DeviceSettingsAdvanced",component:Ei},{path:"/device/settings/credentials/:id",name:"DeviceCredentials",component:Vi},{path:"/device/settings/application/:id",name:"DeviceApplication",component:si},{path:"/devices/provision",name:"DeviceProvision",component:gn},{path:"/device/data/:id",name:"DeviceData",component:Zn},{path:"/serial/flash",name:"FlashTool",component:jo},{path:"/device/path/:id",name:"DevicePath",component:So},{path:"/devices/claim",name:"DevicesClaim",component:Ro}]}),Mo={created:function(){l.$on(d.a.toggleDrawer,this.toggle)},methods:{toggle:function(){this.drawer=!this.drawer},navigate:function(t){qo.push(t)}},computed:{devicename:function(){try{return m.getters.device.name}catch(t){return""}},username:function(){try{return m.getters.user.fullName}catch(t){return""}},items:function(){return this.$store.getters.user.advanced?this.itemsAdvanced:this.itemsNonAdvanced}},data:function(){return{drawer:null,itemsAdvanced:[{title:"Devices",icon:"nfc",route:"/devices",classz:"device"},{title:"Claim device",icon:"card_giftcard",route:"/devices/claim",classz:"accent--text"},{title:"Provision device",icon:"bluetooth",route:"/devices/gettingstarted",classz:"add"},{title:"Flash device",icon:"usb",route:"/serial/flash",classz:"add"},{title:"Applications",icon:"apps",route:"/applications",classz:"applications"},{title:"Projects",icon:"public",route:"/projects",classz:"project"},{title:"Logout",icon:"exit_to_app",route:"/logout",classz:"project"}],itemsNonAdvanced:[{title:"Devices",icon:"nfc",route:"/devices",classz:"device"},{title:"Claim device",icon:"card_giftcard",route:"/devices/claim",classz:"accent--text"},{title:"Provision device",icon:"bluetooth",route:"/devices/provision",classz:"add"},{title:"Logout",icon:"exit_to_app",route:"/logout",classz:"project"}],mini:!1,right:null}}},Wo=Mo,zo=(i("a9fd"),Object(_["a"])(Wo,w,k,!1,null,null,null)),No=zo.exports,Bo=i("c0a4"),Fo=i.n(Bo),Vo={light:{primary:Fo.a.indigo.base,secondary:Fo.a.blue.base,accent:Fo.a.teal.base,error:Fo.a.red.accent2,info:Fo.a.green.darken2,success:Fo.a.green.accent2,warning:Fo.a.orange.base},dark:{primary:Fo.a.blue.base,secondary:Fo.a.orange.darken1,accent:Fo.a.pink.darken2,error:Fo.a.red.accent2,info:Fo.a.green.base,success:Fo.a.green.accent2,warning:Fo.a.orange.darken4}},Ko=Vo,Ho={name:"app",data:function(){return{globalSnackbar:{active:!1,bottom:!0,top:!1,left:!1,right:!1,vertical:!1,multiple:!0,timeout:6e3,message:"",btnColor:"pink",mainColor:"default"},snackbar:!1,message:null,bleOn:!1,loading:!1,successMessage:"",title:"youspot.me"}},components:{"v-toolbar":x,"v-drawer":No,"v-ble":vn},methods:{setupTheme:function(){this.isDarkTheme?this.$vuetify.theme=Ko.dark:this.$vuetify.theme=Ko.light},setUpHttpHeader:function(t){a["default"].http.interceptors.push(function(e,i){e.headers.set("Authorization","Bearer "+t),e.headers.set("Accept","application/json"),i()})},cleanLogin:function(){this.openLogin=!0,$cookies.set("token",null),m.commit("setUser",null),m.commit("deleteAuthToken"),this.openLogin=!0}},computed:{isLoggedIn:function(){return null!==m.getters.user},loginModal:function(){return this.openLogin},isDarkTheme:function(){return m.getters.isDarkTheme},user:function(){return m.getters.user}},watch:{isDarkTheme:function(t){this.setupTheme()}},created:function(){var t=this;this.setupTheme(),m.commit("setBaseUrl","");var e=$cookies.get("token");if(null!==e&&"null"!==e){m.commit("addAuthToken",e);try{A()(e)}catch(n){return console.log(n),void this.cleanLogin()}this.setUpHttpHeader(e);var i=m.getters.baseUrl+"/api/v2/userinfo";this.$http.get(i).then(function(e){m.commit("setUser",e.data.user),window.scrollTo(0,document.body.scrollHeight),t.openLogin=!1},function(e){t.notifyError(e.status,e.body.message),t.cleanLogin()})}else this.cleanLogin();var a=this;l.$on(d.a.apiError,function(t,e){window.scrollTo(0,0),0===t&&(t="",e="Server is unreachable, is your network OK ?"),401===t&&(e="Authentication error",setTimeout(function(){m.commit("deleteAuthToken"),window.location="/"},1e3));var i=t+" "+e;a.globalSnackbar.message=i,a.globalSnackbar.active=!0,a.globalSnackbar.mainColor="warning",a.globalSnackbar.btnColor="default"}),l.$on(d.a.apiSuccess,function(t,e){a.globalSnackbar.message=e,a.globalSnackbar.active=!0,a.globalSnackbar.mainColor="info",a.globalSnackbar.btnColor="pink"}),l.$on(d.a.loadingStart,function(){a.loading=!0}),l.$on("set-title",function(t){a.title=t}),l.$on(d.a.loadingEnd,function(){a.loading=!1})}},Yo=Ho,Go=(i("7faf"),i("b0a0"),Object(_["a"])(Yo,n,s,!1,null,null,null)),Jo=Go.exports,Qo=i("c1df"),Zo=i.n(Qo),Xo=i("ce5b"),tr=i.n(Xo),er=i("28dd"),ir=(i("bf40"),i("b56c"),i("23cf")),ar=i.n(ir),nr=i("2b27"),sr=i.n(nr),or=i("c884"),rr=i.n(or);i("6cc5");a["default"].config.productionTip=!1,a["default"].use(er["a"]),a["default"].use(ar.a),a["default"].use(sr.a),a["default"].use(rr.a),a["default"].use(v["a"]),a["default"].use(tr.a,{options:{customProperties:!0}}),new a["default"]({router:qo,store:m,render:function(t){return t(Jo)}}).$mount("#app"),delete bt["Icon"].Default.prototype._getIconUrl,bt["Icon"].Default.mergeOptions({iconRetinaUrl:i("584d"),iconUrl:i("6397"),shadowUrl:i("e2b9")}),a["default"].filter("formatDate",function(t){if(t)return Zo()(String(t)).format("MM/DD/YYYY hh:mm")})},"5b87":function(t,e,i){},"628e":function(t,e,i){"use strict";var a=i("bab5"),n=i.n(a);n.a},"6a2a":function(t,e,i){"use strict";var a=i("7631"),n=i.n(a);n.a},7631:function(t,e,i){},"792e":function(t,e,i){"use strict";var a=i("f22f"),n=i.n(a);n.a},"7ee1":function(t,e,i){},"7faf":function(t,e,i){"use strict";var a=i("8fba"),n=i.n(a);n.a},"8fba":function(t,e,i){},a874:function(t,e){var i={loadingStart:"loading-start-error",loadingEnd:"loading-end-error",apiError:"api-error-event",toggleDrawer:"toggle-drawer",apiSuccess:"api-success-event"};t.exports=i},a9fd:function(t,e,i){"use strict";var a=i("e98f"),n=i.n(a);n.a},aceb:function(t,e,i){"use strict";var a=i("1e94"),n=i.n(a);n.a},b0a0:function(t,e,i){"use strict";var a=i("07bb"),n=i.n(a);n.a},b56c:function(t,e,i){},bab5:function(t,e,i){},c21d:function(t,e,i){"use strict";var a=i("2ab4"),n=i.n(a);n.a},c7ff:function(t,e,i){"use strict";var a=i("e690"),n=i.n(a);n.a},db49:function(t,e){t.exports={API_LOCATION:"http://localhost:8000/",FW_URL:"https://micropython.org/resources/firmware/esp32--bluetooth.bin",FIRMWARES:[{label:"Micropython v1.11 SPIRAM",url:"https://micropython.org/resources/firmware/esp32-20190529-v1.11.bin"},{label:"Micropython v1.11",url:"https://micropython.org/resources/firmware/esp32spiram-20190529-v1.11.bin"},{label:"Micropython v1.11 Bluetooth",url:"https://micropython.org/resources/firmware/esp32--bluetooth.bin"}]}},e05d:function(t,e,i){},e690:function(t,e,i){},e98f:function(t,e,i){},ea71:function(t,e,i){"use strict";var a=i("4d8c"),n=i.n(a);n.a},f118:function(t,e,i){"use strict";var a=i("2ea3"),n=i.n(a);n.a},f22f:function(t,e,i){},f339:function(t,e,i){},f401:function(t,e,i){"use strict";var a=i("462c"),n=i.n(a);n.a}});
//# sourceMappingURL=app.ef171de7.js.map